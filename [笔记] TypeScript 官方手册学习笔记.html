
    <!DOCTYPE html>
    <html>
    <head>
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <!-- common.css -->
      <style>* {-webkit-tap-highlight-color: rgba(0,0,0,0);}html {-webkit-text-size-adjust: none;}body {font-family: -apple-system, Helvetica, Arial, sans-serif;margin: 0;padding: 20px;color: #333;word-wrap: break-word;}h1, h2, h3, h4, h5, h6 {line-height: 1.1;}img {max-width: 100% !important;height: auto;}blockquote {margin: 0;padding: 0 15px;color: #777;border-left: 4px solid #ddd;}hr {background-color: #ddd;border: 0;height: 1px;margin: 15px 0;}code {font-family: Menlo, Consolas, 'Ubuntu Mono', Monaco, 'source-code-pro', monospace;line-height: 1.4;margin: 0;padding: 0.2em 0;font-size: 90%;background-color: rgba(0,0,0,0.04);border-radius: 3px;}pre > code {margin: 0;padding: 0;font-size: 100%;word-break: normal;background: transparent;border: 0;}ol {list-style-type: decimal;}ol ol, ul ol {list-style-type: lower-latin;}ol ol ol, ul ol ol, ul ul ol, ol ul ol {list-style-type: lower-roman;}table {border-spacing: 0;border-collapse: collapse;margin-top: 0;margin-bottom: 16px;}table th {font-weight: bold;}table th, table td {padding: 6px 13px;border: 1px solid #ddd;}table tr {border-top: 1px solid #ccc;}table tr:nth-child(even) {background-color: #f8f8f8;}input[type="checkbox"] {cursor: default;margin-right: 0.5em;font-size: 13px;}.task-list-item {list-style-type: none;}.task-list-item+.task-list-item {margin-top: 3px;}.task-list-item input {float: left;margin: 0.3em 1em 0.25em -1.6em;vertical-align: middle;}#tag-field {margin: 8px 2px 10px;}#tag-field .tag {display: inline-block;background: #cadff3;border-radius: 4px;padding: 1px 8px;color: black;font-size: 12px;margin-right: 10px;line-height: 1.4;}</style>
      <!-- ace-static.css -->
      <style>.ace_static_highlight {white-space: pre-wrap;}.ace_static_highlight .ace_gutter {width: 2em;text-align: right;padding: 0 3px 0 0;margin-right: 3px;}.ace_static_highlight.ace_show_gutter > .ace_line {padding-left: 2.6em;}.ace_static_highlight .ace_line {position: relative;}.ace_static_highlight .ace_gutter-cell {-moz-user-select: -moz-none;-khtml-user-select: none;-webkit-user-select: none;user-select: none;top: 0;bottom: 0;left: 0;position: absolute;}.ace_static_highlight .ace_gutter-cell:before {content: counter(ace_line, decimal);counter-increment: ace_line;}.ace_static_highlight {counter-reset: ace_line;}</style>
      <style>.ace-chrome .ace_gutter {background: #ebebeb;color: #333;overflow : hidden;}.ace-chrome .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-chrome {background-color: #FFFFFF;color: black;}.ace-chrome .ace_cursor {color: black;}.ace-chrome .ace_invisible {color: rgb(191, 191, 191);}.ace-chrome .ace_constant.ace_buildin {color: rgb(88, 72, 246);}.ace-chrome .ace_constant.ace_language {color: rgb(88, 92, 246);}.ace-chrome .ace_constant.ace_library {color: rgb(6, 150, 14);}.ace-chrome .ace_invalid {background-color: rgb(153, 0, 0);color: white;}.ace-chrome .ace_fold {}.ace-chrome .ace_support.ace_function {color: rgb(60, 76, 114);}.ace-chrome .ace_support.ace_constant {color: rgb(6, 150, 14);}.ace-chrome .ace_support.ace_type,.ace-chrome .ace_support.ace_class.ace-chrome .ace_support.ace_other {color: rgb(109, 121, 222);}.ace-chrome .ace_variable.ace_parameter {font-style:italic;color:#FD971F;}.ace-chrome .ace_keyword.ace_operator {color: rgb(104, 118, 135);}.ace-chrome .ace_comment {color: #236e24;}.ace-chrome .ace_comment.ace_doc {color: #236e24;}.ace-chrome .ace_comment.ace_doc.ace_tag {color: #236e24;}.ace-chrome .ace_constant.ace_numeric {color: rgb(0, 0, 205);}.ace-chrome .ace_variable {color: rgb(49, 132, 149);}.ace-chrome .ace_xml-pe {color: rgb(104, 104, 91);}.ace-chrome .ace_entity.ace_name.ace_function {color: #0000A2;}.ace-chrome .ace_heading {color: rgb(12, 7, 255);}.ace-chrome .ace_list {color:rgb(185, 6, 144);}.ace-chrome .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-chrome .ace_marker-layer .ace_step {background: rgb(252, 255, 0);}.ace-chrome .ace_marker-layer .ace_stack {background: rgb(164, 229, 101);}.ace-chrome .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-chrome .ace_marker-layer .ace_active-line {background: rgba(0, 0, 0, 0.07);}.ace-chrome .ace_gutter-active-line {background-color : #dcdcdc;}.ace-chrome .ace_marker-layer .ace_selected-word {background: rgb(250, 250, 255);border: 1px solid rgb(200, 200, 250);}.ace-chrome .ace_storage,.ace-chrome .ace_keyword,.ace-chrome .ace_meta.ace_tag {color: rgb(147, 15, 128);}.ace-chrome .ace_string.ace_regex {color: rgb(255, 0, 0)}.ace-chrome .ace_string {color: #1A1AA6;}.ace-chrome .ace_entity.ace_other.ace_attribute-name {color: #994409;}.ace-chrome .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;}</style>
      <!-- export.css -->
      <style>
        body{margin:0 auto;max-width:800px;line-height:1.4}
        #nav{margin:5px 0 10px;font-size:15px}
        #titlearea{border-bottom:1px solid #ccc;font-size:17px;padding:10px 0;}
        #contentarea{font-size:15px;margin:16px 0}
        .cell{outline:0;min-height:20px;margin:5px 0;padding:5px 0;}
        .code-cell{font-family:Menlo,Consolas,'Ubuntu Mono',Monaco,'source-code-pro',monospace;font-size:12px;}
        .latex-cell{white-space:pre-wrap;}
      </style>
      <!-- User CSS -->
      <style> .text-cell {font-size: 15px;}.code-cell {font-size: 12px;}.markdown-cell {font-size: 15px;}.latex-cell {font-size: 15px;}</style>
    </head>
    <body>
      <div id="nav"><div>Next: <a href='[笔记] Micro Frontends In Action.html'>[笔记] Micro Frontends In Action</a>, Previous: <a href='[笔记] VSCode 源代码组织方式.html'>[笔记] VSCode 源代码组织方式</a>, Up: <a href='index.html'>Index</a></div></div>
      <div id="titlearea">
        <h2>[笔记] TypeScript 官方手册学习笔记</h2>
      </div>
      <div id="contentarea"><div class="cell markdown-cell"><p>(PS: 我用的笔记软件对 TypeScript 语法高亮支持的很差)</p>
<h2>1. 基本类型</h2>
<h3>1.1 布尔</h3>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">let</span> <span class="ace_identifier">isDone</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">boolean</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_constant ace_language ace_boolean">false</span><span class="ace_punctuation ace_operator">;</span>
</div></div></div></pre>
<h3>1.2 数字</h3>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">let</span> <span class="ace_identifier">decimal</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_storage ace_type ace_variable ace_ts">number</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_constant ace_numeric">6</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">let</span> <span class="ace_identifier">hex</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_storage ace_type ace_variable ace_ts">number</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_constant ace_numeric">0xf00d</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">let</span> <span class="ace_identifier">binary</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_storage ace_type ace_variable ace_ts">number</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_constant ace_numeric">0b1010</span><span class="ace_punctuation ace_operator">;</span>  <span class="ace_comment">// ECMAScript 2015</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">let</span> <span class="ace_identifier">octal</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_storage ace_type ace_variable ace_ts">number</span> <span class="ace_keyword ace_operator">=</span> 0<span class="ace_identifier">o744</span><span class="ace_punctuation ace_operator">;</span>    <span class="ace_comment">// ECMAScript 2015</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">let</span> <span class="ace_identifier">big</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">bigint</span> <span class="ace_keyword ace_operator">=</span> 100<span class="ace_identifier">n</span><span class="ace_punctuation ace_operator">;</span>
</div></div></div></pre>
<h3>1.3 字符串</h3>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">let</span> <span class="ace_identifier">color</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_storage ace_type ace_variable ace_ts">string</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_string">"blue"</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">color</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_string">'red'</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">let</span> <span class="ace_identifier">fullName</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_storage ace_type ace_variable ace_ts">string</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_string ace_quasi ace_start">`</span><span class="ace_string ace_quasi">Bob Bobbington</span><span class="ace_string ace_quasi ace_end">`</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">let</span> <span class="ace_identifier">age</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_storage ace_type ace_variable ace_ts">number</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_constant ace_numeric">37</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">let</span> <span class="ace_identifier">sentence</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_storage ace_type ace_variable ace_ts">string</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_string ace_quasi ace_start">`</span><span class="ace_string ace_quasi">Hello, my name is </span><span class="ace_paren ace_quasi ace_start">${</span><span class="ace_identifier">fullName</span><span class="ace_paren ace_quasi ace_end">}</span><span class="ace_string ace_quasi">.</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_string ace_quasi">I'll be </span><span class="ace_paren ace_quasi ace_start">${</span><span class="ace_identifier">age</span> <span class="ace_keyword ace_operator">+</span> <span class="ace_constant ace_numeric">1</span><span class="ace_paren ace_quasi ace_end">}</span><span class="ace_string ace_quasi"> years old next month.</span><span class="ace_string ace_quasi ace_end">`</span><span class="ace_punctuation ace_operator">;</span>
</div></div></div></pre>
<h3>1.4 数组</h3>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">let</span> <span class="ace_identifier">list</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_storage ace_type ace_variable ace_ts">number</span><span class="ace_paren ace_lparen">[</span><span class="ace_paren ace_rparen">]</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_paren ace_lparen">[</span><span class="ace_constant ace_numeric">1</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_constant ace_numeric">2</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_constant ace_numeric">3</span><span class="ace_paren ace_rparen">]</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">// <span class="ace_cjk" style="width:NaNpx">或</span><span class="ace_cjk" style="width:NaNpx">使</span><span class="ace_cjk" style="width:NaNpx">用</span><span class="ace_cjk" style="width:NaNpx">泛</span><span class="ace_cjk" style="width:NaNpx">型</span><span class="ace_cjk" style="width:NaNpx">方</span><span class="ace_cjk" style="width:NaNpx">式</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">let</span> <span class="ace_identifier">list</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_variable ace_language">Array</span><span class="ace_keyword ace_operator">&lt;</span><span class="ace_storage ace_type ace_variable ace_ts">number</span><span class="ace_keyword ace_operator">&gt;</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_paren ace_lparen">[</span><span class="ace_constant ace_numeric">1</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_constant ace_numeric">2</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_constant ace_numeric">3</span><span class="ace_paren ace_rparen">]</span><span class="ace_punctuation ace_operator">;</span>
</div></div></div></pre>
<h3>1.5 元组</h3>
<p>数量固定但类型可不同的数组。</p>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">let</span> <span class="ace_identifier">x</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_paren ace_lparen">[</span><span class="ace_storage ace_type ace_variable ace_ts">string</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_storage ace_type ace_variable ace_ts">number</span><span class="ace_paren ace_rparen">]</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">x</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_paren ace_lparen">[</span><span class="ace_string">"hello"</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_constant ace_numeric">10</span><span class="ace_paren ace_rparen">]</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">// <span class="ace_cjk" style="width:NaNpx">注</span><span class="ace_cjk" style="width:NaNpx">意</span><span class="ace_cjk" style="width:NaNpx">这</span><span class="ace_cjk" style="width:NaNpx">样</span><span class="ace_cjk" style="width:NaNpx">会</span><span class="ace_cjk" style="width:NaNpx">报</span><span class="ace_cjk" style="width:NaNpx">错</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">x</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_paren ace_lparen">[</span><span class="ace_constant ace_numeric">10</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_string">"hello"</span><span class="ace_paren ace_rparen">]</span><span class="ace_punctuation ace_operator">;</span>
</div></div></div></pre>
<h3>1.6 枚举</h3>
<p>默认是一组整数：</p>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">enum</span> <span class="ace_identifier">Color</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_identifier">Red</span><span class="ace_punctuation ace_operator">,</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_identifier">Green</span><span class="ace_punctuation ace_operator">,</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_identifier">Blue</span><span class="ace_punctuation ace_operator">,</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">let</span> <span class="ace_identifier">c</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">Color</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">Color</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">Green</span><span class="ace_punctuation ace_operator">;</span>
</div></div></div></pre>
<p>指定起始索引：</p>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">enum</span> <span class="ace_identifier">Color</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_identifier">Red</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_constant ace_numeric">1</span><span class="ace_punctuation ace_operator">,</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_identifier">Green</span><span class="ace_punctuation ace_operator">,</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_identifier">Blue</span><span class="ace_punctuation ace_operator">,</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div></div></div></pre>
<p>获取枚举名：</p>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">enum</span> <span class="ace_identifier">Color</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_identifier">Red</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_constant ace_numeric">1</span><span class="ace_punctuation ace_operator">,</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_identifier">Green</span><span class="ace_punctuation ace_operator">,</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_identifier">Blue</span><span class="ace_punctuation ace_operator">,</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">let</span> <span class="ace_identifier">colorName</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_storage ace_type ace_variable ace_ts">string</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">Color</span><span class="ace_paren ace_lparen">[</span><span class="ace_constant ace_numeric">2</span><span class="ace_paren ace_rparen">]</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">console</span><span class="ace_punctuation ace_operator">.</span><span class="ace_support ace_function ace_firebug">log</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">colorName</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>  <span class="ace_comment">// 'Green'</span>
</div></div></div></pre>
<h3>1.7 未知类型</h3>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">let</span> <span class="ace_identifier">notSure</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">unknown</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_constant ace_numeric">4</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">notSure</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_string">"maybe a string instead"</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">notSure</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_constant ace_language ace_boolean">false</span><span class="ace_punctuation ace_operator">;</span>
</div></div></div></pre>
<p>注意以下报错的情况：</p>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword ace_operator ace_ts">declare</span> <span class="ace_storage ace_type">const</span> <span class="ace_identifier">maybe</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">unknown</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">const</span> <span class="ace_identifier">aNumber</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_storage ace_type ace_variable ace_ts">number</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">maybe</span><span class="ace_punctuation ace_operator">;</span>     <span class="ace_comment">// <span class="ace_cjk" style="width:NaNpx">报</span><span class="ace_cjk" style="width:NaNpx">错</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">if</span> <span class="ace_paren ace_lparen">(</span><span class="ace_identifier">maybe</span> <span class="ace_keyword ace_operator">===</span> <span class="ace_constant ace_language ace_boolean">true</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_storage ace_type">const</span> <span class="ace_identifier">aBoolean</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">boolean</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">maybe</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_storage ace_type">const</span> <span class="ace_identifier">aString</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_storage ace_type ace_variable ace_ts">string</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">maybe</span><span class="ace_punctuation ace_operator">;</span>   <span class="ace_comment">// <span class="ace_cjk" style="width:NaNpx">报</span><span class="ace_cjk" style="width:NaNpx">错</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">if</span> <span class="ace_paren ace_lparen">(</span><span class="ace_keyword">typeof</span> <span class="ace_identifier">maybe</span> <span class="ace_keyword ace_operator">===</span> <span class="ace_string">"string"</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_storage ace_type">const</span> <span class="ace_identifier">aString</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_storage ace_type ace_variable ace_ts">string</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">maybe</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_storage ace_type">const</span> <span class="ace_identifier">aBoolean</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">boolean</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">maybe</span><span class="ace_punctuation ace_operator">;</span> <span class="ace_comment">// <span class="ace_cjk" style="width:NaNpx">报</span><span class="ace_cjk" style="width:NaNpx">错</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div></div></div></pre>
<h3>1.8 任意类型</h3>
<p><code>any</code> 允许任何类型，主要是用于兼容原有 js 代码或三方库，它不像 <code>unknown</code> 一样做类型推断。</p>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">let</span> <span class="ace_identifier">looselyTyped</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">any</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_constant ace_numeric">4</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_entity ace_name ace_function ace_ts">looselyTyped.toFixed</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div></div></div></pre>
<p><code>any</code> 类型会传播：</p>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">let</span> <span class="ace_identifier">looselyTyped</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">any</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_paren ace_lparen">{</span><span class="ace_paren ace_rparen">}</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">let</span> <span class="ace_identifier">d</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">looselyTyped</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">a</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">b</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">c</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">d</span><span class="ace_punctuation ace_operator">;</span>  <span class="ace_comment">// d <span class="ace_cjk" style="width:NaNpx">也</span><span class="ace_cjk" style="width:NaNpx">是</span> any <span class="ace_cjk" style="width:NaNpx">类</span><span class="ace_cjk" style="width:NaNpx">型</span></span>
</div></div></div></pre>
<h3>1.9 void</h3>
<p>与 <code>any</code> 相反，代表没有任何类型，常用于无返回值的情况：</p>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">function</span> <span class="ace_entity ace_name ace_function">warnUser</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_keyword">void</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_storage ace_type">console</span><span class="ace_punctuation ace_operator">.</span><span class="ace_support ace_function ace_firebug">log</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">"This is my warning message"</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div></div></div></pre>
<p>不要把变量类型声明为 <code>void</code> .</p>
<h3>1.10 null 和 undefined</h3>
<p><code>null</code> 和 <code>undefined</code> 是其它类型的子类，故在非严格模式(--strictNullChecks为false)下：</p>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">let</span> <span class="ace_identifier">a</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_storage ace_type ace_variable ace_ts">number</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_constant ace_language">null</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">let</span> <span class="ace_identifier">b</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_storage ace_type ace_variable ace_ts">string</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_constant ace_language">undefined</span><span class="ace_punctuation ace_operator">;</span>
</div></div></div></pre>
<p>又：<code>undefined</code> 是 <code>null</code> 的子类。</p>
<h3>1.11 never 类型</h3>
<p><code>never</code> 代表从不会产生的类型，如总会抛出异常或无法执行完毕的函数。<code>never</code> 是所有类型的子类型，<code>any</code> 类型也不可以赋值给 <code>never</code></p>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">function</span> <span class="ace_entity ace_name ace_function">error</span><span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter">message</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_storage ace_type ace_variable ace_ts">string</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">never</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_keyword">throw</span> <span class="ace_keyword">new</span> <span class="ace_variable ace_language">Error</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">message</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">function</span> <span class="ace_entity ace_name ace_function">infiniteLoop</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">never</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_keyword">while</span> <span class="ace_paren ace_lparen">(</span><span class="ace_constant ace_language ace_boolean">true</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span><span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div></div></div></pre>
<h3>1.12 对象</h3>
<p>主要用于 API 描述，其它一般没啥用。</p>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword ace_operator ace_ts">declare</span> <span class="ace_storage ace_type">function</span> <span class="ace_entity ace_name ace_function">create</span><span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter">o</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">object</span> | <span class="ace_constant ace_language">null</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_keyword">void</span><span class="ace_punctuation ace_operator">;</span>
</div></div></div></pre>
<h3>1.13 类型断言</h3>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">let</span> <span class="ace_identifier">someValue</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">unknown</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_string">"this is a string"</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">// as <span class="ace_cjk" style="width:NaNpx">语</span><span class="ace_cjk" style="width:NaNpx">法</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">let</span> <span class="ace_identifier">strLength</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_storage ace_type ace_variable ace_ts">number</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_paren ace_lparen">(</span><span class="ace_identifier">someValue</span> <span class="ace_identifier">as</span> <span class="ace_identifier">string</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">.</span><span class="ace_support ace_constant">length</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">// <span class="ace_cjk" style="width:NaNpx">尖</span><span class="ace_cjk" style="width:NaNpx">括</span><span class="ace_cjk" style="width:NaNpx">号</span><span class="ace_cjk" style="width:NaNpx">语</span><span class="ace_cjk" style="width:NaNpx">法</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">let</span> <span class="ace_identifier">strLength</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_storage ace_type ace_variable ace_ts">number</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_paren ace_lparen">(</span><span class="ace_meta ace_tag ace_punctuation ace_tag-open ace_xml">&lt;</span><span class="ace_meta ace_tag ace_tag-name ace_xml">string</span><span class="ace_meta ace_tag ace_punctuation ace_tag-close ace_xml">&gt;</span><span class="ace_string">someValue).length;</span>
</div></div></div></pre>
<p>JSX 中只支持 as 语法。</p>
<h3>1.14 内置函数对象</h3>
<p>Number, String, Boolean, Symbol 和 Object 不要作为类型使用，使用其小写形式的原始类型。</p>
<hr>
<h2>2. 接口</h2>
<p>定义鸭子类型。</p>
<h3>2.1 第一个例子</h3>
<p>Typescript 的类型检测规则：</p>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">function</span> <span class="ace_entity ace_name ace_function">printLabel</span><span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter">labeledObj</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_paren ace_lparen">{</span> <span class="ace_variable ace_parameter ace_function ace_ts">label</span>: <span class="ace_variable ace_parameter ace_function ace_ts">string</span> <span class="ace_paren ace_rparen">})</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_storage ace_type">console</span><span class="ace_punctuation ace_operator">.</span><span class="ace_support ace_function ace_firebug">log</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">labeledObj</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">label</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">let</span> <span class="ace_identifier">myObj</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_paren ace_lparen">{</span> <span class="ace_variable ace_parameter ace_function ace_ts">size</span>: <span class="ace_variable ace_parameter ace_function ace_ts">10</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_identifier">label</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_string">"Size 10 Object"</span> <span class="ace_paren ace_rparen">}</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">printLabel</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">myObj</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div></div></div></pre>
<p>用接口的方式定义：</p>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword ace_operator ace_ts">interface</span> <span class="ace_identifier">LabeledValue</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_variable ace_parameter ace_function ace_ts">label</span>: <span class="ace_variable ace_parameter ace_function ace_ts">string</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">function</span> <span class="ace_entity ace_name ace_function">printLabel</span><span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter">labeledObj</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">LabeledValue</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_storage ace_type">console</span><span class="ace_punctuation ace_operator">.</span><span class="ace_support ace_function ace_firebug">log</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">labeledObj</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">label</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div></div></div></pre>
<p>检测时不关注属性顺序。</p>
<h3>2.2 可选属性</h3>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword ace_operator ace_ts">interface</span> <span class="ace_identifier">SquareConfig</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_variable ace_parameter ace_function ace_ts">color?</span>: <span class="ace_variable ace_parameter ace_function ace_ts">string</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_variable ace_parameter ace_function ace_ts">width?</span>: <span class="ace_variable ace_parameter ace_function ace_ts">number</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div></div></div></pre>
<p>好处是可以避免使用声明以外的属性：</p>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">function</span> <span class="ace_entity ace_name ace_function">createSquare</span><span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter">config</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">SquareConfig</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_paren ace_lparen">{</span> <span class="ace_variable ace_parameter ace_function ace_ts">color</span>: <span class="ace_variable ace_parameter ace_function ace_ts">string</span><span class="ace_punctuation ace_operator">;</span> <span class="ace_variable ace_parameter ace_function ace_ts">area</span>: <span class="ace_variable ace_parameter ace_function ace_ts">number</span> <span class="ace_paren ace_rparen">}</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_storage ace_type">let</span> <span class="ace_identifier">newSquare</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_paren ace_lparen">{</span> <span class="ace_identifier">color</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_string">"white"</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_variable ace_parameter ace_function ace_ts">area</span>: <span class="ace_variable ace_parameter ace_function ace_ts">100</span> <span class="ace_paren ace_rparen">}</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_keyword">if</span> <span class="ace_paren ace_lparen">(</span><span class="ace_identifier">config</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">clor</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span> <span class="ace_comment">// clor <span class="ace_cjk" style="width:NaNpx">不</span><span class="ace_cjk" style="width:NaNpx">在</span> SquareConfig <span class="ace_cjk" style="width:NaNpx">上</span><span class="ace_cjk" style="width:NaNpx">，</span><span class="ace_cjk" style="width:NaNpx">故</span><span class="ace_cjk" style="width:NaNpx">报</span><span class="ace_cjk" style="width:NaNpx">错</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword ace_operator">...</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_keyword ace_operator">...</span>
</div></div></div></pre>
<p>函数提供可选参数对象时，该特性非常有用。</p>
<h3>2.3 只读属性</h3>
<p>对象创建后不可改：</p>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword ace_operator ace_ts">interface</span> <span class="ace_identifier">Point</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_identifier">readonly</span> <span class="ace_identifier">x</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_storage ace_type ace_variable ace_ts">number</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_identifier">readonly</span> <span class="ace_identifier">y</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_storage ace_type ace_variable ace_ts">number</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">let</span> <span class="ace_identifier">p1</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">Point</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_paren ace_lparen">{</span> <span class="ace_variable ace_parameter ace_function ace_ts">x</span>: <span class="ace_variable ace_parameter ace_function ace_ts">10</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_variable ace_parameter ace_function ace_ts">y</span>: <span class="ace_variable ace_parameter ace_function ace_ts">20</span> <span class="ace_paren ace_rparen">}</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">p1</span><span class="ace_punctuation ace_operator">.</span><span class="ace_support ace_constant">x</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_constant ace_numeric">5</span><span class="ace_punctuation ace_operator">;</span> <span class="ace_comment">// <span class="ace_cjk" style="width:NaNpx">报</span><span class="ace_cjk" style="width:NaNpx">错</span>!</span>
</div></div></div></pre>
<p>数组有 <code>ReadonlyArray&lt;T&gt;</code> 类型。</p>
<p><code>const</code> 用于变量，<code>readonly</code> 用于属性。</p>
<h3>2.4 过载属性检查(excess property checking)</h3>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword ace_operator ace_ts">interface</span> <span class="ace_identifier">SquareConfig</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_variable ace_parameter ace_function ace_ts">color?</span>: <span class="ace_variable ace_parameter ace_function ace_ts">string</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_variable ace_parameter ace_function ace_ts">width?</span>: <span class="ace_variable ace_parameter ace_function ace_ts">number</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">function</span> <span class="ace_entity ace_name ace_function">createSquare</span><span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter">config</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">SquareConfig</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_paren ace_lparen">{</span> <span class="ace_variable ace_parameter ace_function ace_ts">color</span>: <span class="ace_variable ace_parameter ace_function ace_ts">string</span><span class="ace_punctuation ace_operator">;</span> <span class="ace_variable ace_parameter ace_function ace_ts">area</span>: <span class="ace_variable ace_parameter ace_function ace_ts">number</span> <span class="ace_paren ace_rparen">}</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_keyword">return</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_variable ace_parameter ace_function ace_ts">color</span>: <span class="ace_variable ace_parameter ace_function ace_ts">config.color</span> <span class="ace_keyword ace_operator">||</span> <span class="ace_string">"red"</span><span class="ace_punctuation ace_operator">,</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_variable ace_parameter ace_function ace_ts">area</span>: <span class="ace_variable ace_parameter ace_function ace_ts">config.width</span> <span class="ace_punctuation ace_operator">?</span> <span class="ace_identifier">config</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">width</span> <span class="ace_keyword ace_operator">*</span> <span class="ace_variable ace_parameter ace_function ace_ts">config.width</span> : <span class="ace_variable ace_parameter ace_function ace_ts">20</span><span class="ace_punctuation ace_operator">,</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_paren ace_rparen">}</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">// !<span class="ace_cjk" style="width:NaNpx">传</span><span class="ace_cjk" style="width:NaNpx">入</span><span class="ace_cjk" style="width:NaNpx">接</span><span class="ace_cjk" style="width:NaNpx">口</span><span class="ace_cjk" style="width:NaNpx">外</span><span class="ace_cjk" style="width:NaNpx">的</span> colour <span class="ace_cjk" style="width:NaNpx">会</span><span class="ace_cjk" style="width:NaNpx">报</span><span class="ace_cjk" style="width:NaNpx">错</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">let</span> <span class="ace_identifier">mySquare</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">createSquare</span><span class="ace_paren ace_lparen">({</span> <span class="ace_identifier">colour</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_string">"red"</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_variable ace_parameter ace_function ace_ts">width</span>: <span class="ace_variable ace_parameter ace_function ace_ts">100</span> <span class="ace_paren ace_rparen">})</span><span class="ace_punctuation ace_operator">;</span>
</div></div></div></pre>
<p>可以使用<strong>类型断言</strong>：</p>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">let</span> <span class="ace_identifier">mySquare</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">createSquare</span><span class="ace_paren ace_lparen">({</span> <span class="ace_variable ace_parameter ace_function ace_ts">width</span>: <span class="ace_variable ace_parameter ace_function ace_ts">100</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_variable ace_parameter ace_function ace_ts">opacity</span>: <span class="ace_variable ace_parameter ace_function ace_ts">0.5</span> <span class="ace_paren ace_rparen">}</span> <span class="ace_identifier">as</span> <span class="ace_identifier">SquareConfig</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div></div></div></pre>
<p>更好的方式是使用<strong>索引签名</strong>：</p>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword ace_operator ace_ts">interface</span> <span class="ace_identifier">SquareConfig</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_variable ace_parameter ace_function ace_ts">color?</span>: <span class="ace_variable ace_parameter ace_function ace_ts">string</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_variable ace_parameter ace_function ace_ts">width?</span>: <span class="ace_variable ace_parameter ace_function ace_ts">number</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_paren ace_lparen">[</span><span class="ace_variable ace_parameter ace_function ace_ts">propName</span>: <span class="ace_variable ace_parameter ace_function ace_ts">string</span><span class="ace_paren ace_rparen">]</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">any</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">let</span> <span class="ace_identifier">squareOptions</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_paren ace_lparen">{</span> <span class="ace_identifier">colour</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_string">"red"</span> <span class="ace_paren ace_rparen">}</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">// <span class="ace_cjk" style="width:NaNpx">这</span><span class="ace_cjk" style="width:NaNpx">个</span><span class="ace_cjk" style="width:NaNpx">时</span><span class="ace_cjk" style="width:NaNpx">候</span><span class="ace_cjk" style="width:NaNpx">就</span><span class="ace_cjk" style="width:NaNpx">必</span><span class="ace_cjk" style="width:NaNpx">须</span><span class="ace_cjk" style="width:NaNpx">传</span><span class="ace_cjk" style="width:NaNpx">入</span><span class="ace_cjk" style="width:NaNpx">任</span><span class="ace_cjk" style="width:NaNpx">一</span><span class="ace_cjk" style="width:NaNpx">普</span><span class="ace_cjk" style="width:NaNpx">通</span><span class="ace_cjk" style="width:NaNpx">属</span><span class="ace_cjk" style="width:NaNpx">性</span>(width <span class="ace_cjk" style="width:NaNpx">或</span> color)<span class="ace_cjk" style="width:NaNpx">，</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">// <span class="ace_cjk" style="width:NaNpx">否</span><span class="ace_cjk" style="width:NaNpx">则</span><span class="ace_cjk" style="width:NaNpx">下</span><span class="ace_cjk" style="width:NaNpx">面</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">代</span><span class="ace_cjk" style="width:NaNpx">码</span><span class="ace_cjk" style="width:NaNpx">是</span><span class="ace_cjk" style="width:NaNpx">会</span><span class="ace_cjk" style="width:NaNpx">报</span><span class="ace_cjk" style="width:NaNpx">错</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">。</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">let</span> <span class="ace_identifier">mySquare</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">createSquare</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">squareOptions</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div></div></div></pre>
<p>多数被过载属性检查到的情况，都是代码写错了！</p>
<h3>2.5 函数类型</h3>
<p>通过<strong>调用签名</strong>定义函数类型的接口：</p>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword ace_operator ace_ts">interface</span> <span class="ace_identifier">SearchFunc</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_comment">// <span class="ace_cjk" style="width:NaNpx">参</span><span class="ace_cjk" style="width:NaNpx">数</span><span class="ace_cjk" style="width:NaNpx">列</span><span class="ace_cjk" style="width:NaNpx">表</span> + <span class="ace_cjk" style="width:NaNpx">返</span><span class="ace_cjk" style="width:NaNpx">回</span><span class="ace_cjk" style="width:NaNpx">值</span><span class="ace_cjk" style="width:NaNpx">类</span><span class="ace_cjk" style="width:NaNpx">型</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter ace_function ace_ts">source</span>: <span class="ace_variable ace_parameter ace_function ace_ts">string</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_variable ace_parameter ace_function ace_ts">subString</span>: <span class="ace_variable ace_parameter ace_function ace_ts">string</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">boolean</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">let</span> <span class="ace_identifier">mySearch</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">SearchFunc</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_entity ace_name ace_function">mySearch</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_storage ace_type">function</span> <span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter">source</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_storage ace_type ace_variable ace_ts">string</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_variable ace_parameter ace_function ace_ts">subString</span>: <span class="ace_variable ace_parameter ace_function ace_ts">string</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_storage ace_type">let</span> <span class="ace_identifier">result</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">source</span><span class="ace_punctuation ace_operator">.</span><span class="ace_support ace_function">search</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">subString</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_keyword">return</span> <span class="ace_identifier">result</span> <span class="ace_keyword ace_operator">&gt;</span> <span class="ace_constant ace_numeric">-1</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span><span class="ace_punctuation ace_operator">;</span>
</div></div></div></pre>
<p>参数列表中参数名可以不用匹配:</p>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_entity ace_name ace_function">mySearch</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_storage ace_type">function</span> <span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter">src</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_storage ace_type ace_variable ace_ts">string</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_variable ace_parameter ace_function ace_ts">sub</span>: <span class="ace_variable ace_parameter ace_function ace_ts">string</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">boolean</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_keyword ace_operator">...</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span><span class="ace_punctuation ace_operator">;</span>
</div></div></div></pre>
<p>以下代码编译器可以正常推断：</p>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">let</span> <span class="ace_identifier">mySearch</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">SearchFunc</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_entity ace_name ace_function">mySearch</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_storage ace_type">function</span> <span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter">src</span><span class="ace_punctuation ace_operator">, </span><span class="ace_variable ace_parameter">sub</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_storage ace_type">let</span> <span class="ace_identifier">result</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">src</span><span class="ace_punctuation ace_operator">.</span><span class="ace_support ace_function">search</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">sub</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_keyword">return</span> <span class="ace_identifier">result</span> <span class="ace_keyword ace_operator">&gt;</span> <span class="ace_constant ace_numeric">-1</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span><span class="ace_punctuation ace_operator">;</span>
</div></div></div></pre>
<p>[个人思考] ts 的这种设计，可以很好的兼容及迁移 js 代码，例如可以在原有代码上层提取出接口层，继而进行后续扩展。</p>
<h3>2.6 可索引的类型</h3>
<p>使用<strong>索引签名</strong>处理“数组”及“关联数组”的场景，索引签名只支持 string 和 number 类型。</p>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword ace_operator ace_ts">interface</span> <span class="ace_identifier">StringArray</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_paren ace_lparen">[</span><span class="ace_variable ace_parameter ace_function ace_ts">index</span>: <span class="ace_variable ace_parameter ace_function ace_ts">number</span><span class="ace_paren ace_rparen">]</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_storage ace_type ace_variable ace_ts">string</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">let</span> <span class="ace_identifier">myArray</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">StringArray</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">myArray</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_paren ace_lparen">[</span><span class="ace_string">"Bob"</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_string">"Fred"</span><span class="ace_paren ace_rparen">]</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">let</span> <span class="ace_identifier">myStr</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_storage ace_type ace_variable ace_ts">string</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">myArray</span><span class="ace_paren ace_lparen">[</span><span class="ace_constant ace_numeric">0</span><span class="ace_paren ace_rparen">]</span><span class="ace_punctuation ace_operator">;</span>
</div></div></div></pre>
<p>注意这种情况：</p>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword ace_operator ace_ts">interface</span> <span class="ace_identifier">NumberDictionary</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_paren ace_lparen">[</span><span class="ace_variable ace_parameter ace_function ace_ts">index</span>: <span class="ace_variable ace_parameter ace_function ace_ts">string</span><span class="ace_paren ace_rparen">]</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_storage ace_type ace_variable ace_ts">number</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_variable ace_parameter ace_function ace_ts">length</span>: <span class="ace_variable ace_parameter ace_function ace_ts">number</span><span class="ace_punctuation ace_operator">;</span> <span class="ace_comment">// <span class="ace_cjk" style="width:NaNpx">这</span><span class="ace_cjk" style="width:NaNpx">是</span><span class="ace_cjk" style="width:NaNpx">可</span><span class="ace_cjk" style="width:NaNpx">以</span><span class="ace_cjk" style="width:NaNpx">的</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_variable ace_parameter ace_function ace_ts">name</span>: <span class="ace_variable ace_parameter ace_function ace_ts">string</span><span class="ace_punctuation ace_operator">;</span> <span class="ace_comment">// <span class="ace_cjk" style="width:NaNpx">报</span><span class="ace_cjk" style="width:NaNpx">错</span>!! <span class="ace_cjk" style="width:NaNpx">已</span><span class="ace_cjk" style="width:NaNpx">经</span><span class="ace_cjk" style="width:NaNpx">定</span><span class="ace_cjk" style="width:NaNpx">义</span><span class="ace_cjk" style="width:NaNpx">了</span> string <span class="ace_cjk" style="width:NaNpx">类</span><span class="ace_cjk" style="width:NaNpx">型</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">索</span><span class="ace_cjk" style="width:NaNpx">引</span><span class="ace_cjk" style="width:NaNpx">签</span><span class="ace_cjk" style="width:NaNpx">名</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div></div></div></pre>
<p>定义过 string 后是不能再定义 number 的（这是由于 JS 对数组的解释方式其实是对象）：</p>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword ace_operator ace_ts">interface</span> <span class="ace_identifier">NotOkay</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_paren ace_lparen">[</span><span class="ace_variable ace_parameter ace_function ace_ts">x</span>: <span class="ace_variable ace_parameter ace_function ace_ts">number</span><span class="ace_paren ace_rparen">]</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">Animal</span><span class="ace_punctuation ace_operator">;</span>  <span class="ace_comment">// <span class="ace_cjk" style="width:NaNpx">报</span><span class="ace_cjk" style="width:NaNpx">错</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_paren ace_lparen">[</span><span class="ace_variable ace_parameter ace_function ace_ts">x</span>: <span class="ace_variable ace_parameter ace_function ace_ts">string</span><span class="ace_paren ace_rparen">]</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">Dog</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div></div></div></pre>
<p>只读：</p>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword ace_operator ace_ts">interface</span> <span class="ace_identifier">ReadonlyStringArray</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_identifier">readonly</span> <span class="ace_paren ace_lparen">[</span><span class="ace_variable ace_parameter ace_function ace_ts">index</span>: <span class="ace_variable ace_parameter ace_function ace_ts">number</span><span class="ace_paren ace_rparen">]</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_storage ace_type ace_variable ace_ts">string</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div></div></div></pre>
<h3>2.7 类</h3>
<p>实现接口：</p>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword ace_operator ace_ts">interface</span> <span class="ace_identifier">ClockInterface</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_variable ace_parameter ace_function ace_ts">currentTime</span>: <span class="ace_variable ace_parameter ace_function ace_ts">Date</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_identifier">setTime</span><span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter ace_function ace_ts">d</span>: <span class="ace_variable ace_parameter ace_function ace_ts">Date</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_keyword">void</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">class</span> <span class="ace_identifier">Clock</span> <span class="ace_keyword">implements</span> <span class="ace_identifier">ClockInterface</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_variable ace_parameter ace_function ace_ts">currentTime</span>: <span class="ace_variable ace_parameter ace_function ace_ts">Date</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_keyword">new</span> <span class="ace_variable ace_language">Date</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_identifier">setTime</span><span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter ace_function ace_ts">d</span>: <span class="ace_variable ace_parameter ace_function ace_ts">Date</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_storage ace_type ace_variable ace_ts">this.</span><span class="ace_identifier">currentTime</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">d</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_identifier">constructor</span><span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter ace_function ace_ts">h</span>: <span class="ace_variable ace_parameter ace_function ace_ts">number</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_variable ace_parameter ace_function ace_ts">m</span>: <span class="ace_variable ace_parameter ace_function ace_ts">number</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span><span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div></div></div></pre>
<h3>2.8 接口继承</h3>
<p>采用多继承：</p>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword ace_operator ace_ts">interface</span> <span class="ace_identifier">Shape</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_variable ace_parameter ace_function ace_ts">color</span>: <span class="ace_variable ace_parameter ace_function ace_ts">string</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">interface</span> <span class="ace_identifier">PenStroke</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_variable ace_parameter ace_function ace_ts">penWidth</span>: <span class="ace_variable ace_parameter ace_function ace_ts">number</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">interface</span> <span class="ace_identifier">Square</span> <span class="ace_keyword">extends</span> <span class="ace_identifier">Shape</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_identifier">PenStroke</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_variable ace_parameter ace_function ace_ts">sideLength</span>: <span class="ace_variable ace_parameter ace_function ace_ts">number</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">let</span> <span class="ace_identifier">square</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_paren ace_lparen">{</span><span class="ace_paren ace_rparen">}</span> <span class="ace_identifier">as</span> <span class="ace_identifier">Square</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">square</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">color</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_string">"blue"</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">square</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">sideLength</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_constant ace_numeric">10</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">square</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">penWidth</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_constant ace_numeric">5.0</span><span class="ace_punctuation ace_operator">;</span>
</div></div></div></pre>
<h3>2.9 混合类型</h3>
<p>可以将各类型混合在一起使用：</p>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword ace_operator ace_ts">interface</span> <span class="ace_identifier">Counter</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter ace_function ace_ts">start</span>: <span class="ace_variable ace_parameter ace_function ace_ts">number</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_storage ace_type ace_variable ace_ts">string</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_variable ace_parameter ace_function ace_ts">interval</span>: <span class="ace_variable ace_parameter ace_function ace_ts">number</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_entity ace_name ace_function ace_ts">reset</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_keyword">void</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">function</span> <span class="ace_entity ace_name ace_function">getCounter</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">Counter</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_storage ace_type">let</span> <span class="ace_entity ace_name ace_function">counter</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_storage ace_type">function</span> <span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter">start</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_storage ace_type ace_variable ace_ts">number</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span><span class="ace_paren ace_rparen">}</span> <span class="ace_identifier">as</span> <span class="ace_identifier">Counter</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_identifier">counter</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">interval</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_constant ace_numeric">123</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_storage ace_type">counter</span><span class="ace_punctuation ace_operator">.</span><span class="ace_entity ace_name ace_function">reset</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_storage ace_type">function</span> <span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span><span class="ace_paren ace_rparen">}</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_keyword">return</span> <span class="ace_identifier">counter</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">let</span> <span class="ace_identifier">c</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_entity ace_name ace_function ace_ts">getCounter</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">c</span><span class="ace_paren ace_lparen">(</span><span class="ace_constant ace_numeric">10</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_entity ace_name ace_function ace_ts">c.reset</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">c</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">interval</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_constant ace_numeric">5.0</span><span class="ace_punctuation ace_operator">;</span>
</div></div></div></pre>
<p>[个人思考] 这样 Counter 既表现得像函数，又像对象。主要用在对接三方库时使用，自己的代码这样写挺混乱，这是早期库如 jQuery 的风格。</p>
<h3>2.10 接口继承类</h3>
<p>接口可以继承类的所有成员，但不包含其实现。不论类的 public 还是 private 成员都会被继承：</p>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword ace_operator ace_ts">class</span> <span class="ace_identifier">Control</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_keyword ace_operator ace_ts">private</span> <span class="ace_variable ace_parameter ace_function ace_ts">state</span>: <span class="ace_variable ace_parameter ace_function ace_ts">any</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">interface</span> <span class="ace_identifier">SelectableControl</span> <span class="ace_keyword">extends</span> <span class="ace_identifier">Control</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_entity ace_name ace_function ace_ts">select</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_keyword">void</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">class</span> <span class="ace_identifier">Button</span> <span class="ace_keyword">extends</span> <span class="ace_identifier">Control</span> <span class="ace_keyword">implements</span> <span class="ace_identifier">SelectableControl</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_entity ace_name ace_function ace_ts">select</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span><span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">class</span> <span class="ace_identifier">TextBox</span> <span class="ace_keyword">extends</span> <span class="ace_identifier">Control</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_entity ace_name ace_function ace_ts">select</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span><span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">class</span> <span class="ace_identifier">ImageControl</span> <span class="ace_keyword">implements</span> <span class="ace_identifier">SelectableControl</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_keyword ace_operator ace_ts">private</span> <span class="ace_variable ace_parameter ace_function ace_ts">state</span>: <span class="ace_variable ace_parameter ace_function ace_ts">any</span><span class="ace_punctuation ace_operator">;</span>   <span class="ace_comment">// <span class="ace_cjk" style="width:NaNpx">报</span><span class="ace_cjk" style="width:NaNpx">错</span>!!</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_entity ace_name ace_function ace_ts">select</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span><span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div></div></div></pre>
<p>主要作用是：在复杂的继承体系中，保障代码只能通过继承某特定子类才能实现该接口。如例子中的 <code>ImageControl</code> 没有继承 <code>Control</code> 故无法拥有 <code>state</code> 。</p>
<hr>
<h2>3. 函数</h2>
<p>Typescript 同样支持命名函数和匿名函数。</p>
<h3>3.1 给函数增加类型</h3>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">function</span> <span class="ace_entity ace_name ace_function">add</span><span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter">x</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_storage ace_type ace_variable ace_ts">number</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_variable ace_parameter ace_function ace_ts">y</span>: <span class="ace_variable ace_parameter ace_function ace_ts">number</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_storage ace_type ace_variable ace_ts">number</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_keyword">return</span> <span class="ace_identifier">x</span> <span class="ace_keyword ace_operator">+</span> <span class="ace_identifier">y</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div></div></div></pre>
<h3>3.2 函数类型</h3>
<p>完整的函数类型要包含参数列表和返回值(箭头符号 <code>=&gt;</code> 后面是返回值，必须明确写出，无返回值时使用 <code>void</code> )：</p>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">let</span> <span class="ace_identifier">myAdd</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter ace_function ace_ts">baseValue</span>: <span class="ace_variable ace_parameter ace_function ace_ts">number</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_variable ace_parameter ace_function ace_ts">increment</span>: <span class="ace_variable ace_parameter ace_function ace_ts">number</span><span class="ace_paren ace_rparen">)</span> <span class="ace_keyword ace_operator">=&gt;</span> <span class="ace_storage ace_type ace_variable ace_ts">number</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_storage ace_type">function</span> <span class="ace_paren ace_lparen">(</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_variable ace_parameter ace_function ace_ts">x</span>: <span class="ace_variable ace_parameter ace_function ace_ts">number</span><span class="ace_punctuation ace_operator">,</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_variable ace_parameter ace_function ace_ts">y</span>: <span class="ace_variable ace_parameter ace_function ace_ts">number</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_storage ace_type ace_variable ace_ts">number</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_keyword">return</span> <span class="ace_identifier">x</span> <span class="ace_keyword ace_operator">+</span> <span class="ace_identifier">y</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span><span class="ace_punctuation ace_operator">;</span>
</div></div></div></pre>
<h3>3.3 类型推断</h3>
<p>存在上下文信息时，TypeScript 编译器可以做类型推断：</p>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">let</span> <span class="ace_entity ace_name ace_function">myAdd</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_storage ace_type">function</span> <span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter">x</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_storage ace_type ace_variable ace_ts">number</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_variable ace_parameter ace_function ace_ts">y</span>: <span class="ace_variable ace_parameter ace_function ace_ts">number</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_storage ace_type ace_variable ace_ts">number</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_keyword">return</span> <span class="ace_identifier">x</span> <span class="ace_keyword ace_operator">+</span> <span class="ace_identifier">y</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">let</span> <span class="ace_identifier">myAdd2</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter ace_function ace_ts">baseValue</span>: <span class="ace_variable ace_parameter ace_function ace_ts">number</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_variable ace_parameter ace_function ace_ts">increment</span>: <span class="ace_variable ace_parameter ace_function ace_ts">number</span><span class="ace_paren ace_rparen">)</span> <span class="ace_keyword ace_operator">=&gt;</span> <span class="ace_storage ace_type ace_variable ace_ts">number</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_storage ace_type">function</span> <span class="ace_paren ace_lparen">(</span><span class="ace_identifier">x</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_identifier">y</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_keyword">return</span> <span class="ace_identifier">x</span> <span class="ace_keyword ace_operator">+</span> <span class="ace_identifier">y</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span><span class="ace_punctuation ace_operator">;</span>
</div></div></div></pre>
<h3>3.4 可选参数和默认参数</h3>
<p>可选参数使用 <code>?</code> 且必须在必填参数后面：</p>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">function</span> <span class="ace_entity ace_name ace_function">buildName</span><span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter">firstName</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_storage ace_type ace_variable ace_ts">string</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_variable ace_parameter ace_function ace_ts">lastName?</span>: <span class="ace_variable ace_parameter ace_function ace_ts">string</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_keyword">if</span> <span class="ace_paren ace_lparen">(</span><span class="ace_identifier">lastName</span><span class="ace_paren ace_rparen">)</span> <span class="ace_keyword">return</span> <span class="ace_identifier">firstName</span> <span class="ace_keyword ace_operator">+</span> <span class="ace_string">" "</span> <span class="ace_keyword ace_operator">+</span> <span class="ace_identifier">lastName</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_keyword">else</span> <span class="ace_keyword">return</span> <span class="ace_identifier">firstName</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div></div></div></pre>
<p>默认参数：</p>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">function</span> <span class="ace_entity ace_name ace_function">buildName</span><span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter">firstName</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_storage ace_type ace_variable ace_ts">string</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_identifier">lastName</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_string">"Smith"</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_comment">// ...</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div></div></div></pre>
<ul>
<li>在必填参数后时，其定义的类型同可选参数</li>
<li>可在必填参数前使用</li>
</ul>
<h3>3.5 剩余参数</h3>
<p>它是一组绑定在一起的可选参数，主要替换 JS 中用到 <code>arguments</code> 的场景。</p>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">function</span> <span class="ace_entity ace_name ace_function">buildName</span><span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter">firstName</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_storage ace_type ace_variable ace_ts">string</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_variable ace_parameter ace_function ace_ts">...restOfName</span>: <span class="ace_variable ace_parameter ace_function ace_ts">string</span><span class="ace_paren ace_lparen">[</span><span class="ace_paren ace_rparen">])</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_keyword">return</span> <span class="ace_identifier">firstName</span> <span class="ace_keyword ace_operator">+</span> <span class="ace_string">" "</span> <span class="ace_keyword ace_operator">+</span> <span class="ace_identifier">restOfName</span><span class="ace_punctuation ace_operator">.</span><span class="ace_support ace_function">join</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">" "</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div></div></div></pre>
<h3>3.6 this</h3>
<p>首先要对 JS 的 <code>this</code> 有清醒的认识！在 TypeScript 中，可以在第一个参数明确定义出 <code>this</code> 来限制其 <code>callee</code> 的类型。</p>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">let</span> <span class="ace_identifier">deck</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">Deck</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_variable ace_parameter ace_function ace_ts">suits</span>: <span class="ace_variable ace_parameter ace_function ace_ts">...</span><span class="ace_punctuation ace_operator">,</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_variable ace_parameter ace_function ace_ts">cards</span>: <span class="ace_variable ace_parameter ace_function ace_ts">...</span><span class="ace_punctuation ace_operator">,</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_variable ace_parameter ace_function ace_ts">createCardPicker</span>: <span class="ace_variable ace_parameter ace_function ace_ts">function</span> <span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter ace_function ace_ts">this</span>: <span class="ace_variable ace_parameter ace_function ace_ts">Deck</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword">return</span> <span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span> <span class="ace_keyword ace_operator">=&gt;</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>  <span class="ace_keyword ace_operator">...</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>  <span class="ace_keyword">return</span> <span class="ace_keyword ace_operator">...</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_paren ace_rparen">}</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_paren ace_rparen">}</span><span class="ace_punctuation ace_operator">,</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span><span class="ace_punctuation ace_operator">;</span>
</div></div></div></pre>
<p>在回调函数中的 <code>this</code> 要和调用者中声明的类型一致：</p>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword ace_operator ace_ts">interface</span> <span class="ace_identifier">UIElement</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_identifier">addClickListener</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">onclick</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter ace_function ace_ts">this</span>: <span class="ace_variable ace_parameter ace_function ace_ts">void</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_variable ace_parameter ace_function ace_ts">e</span>: <span class="ace_variable ace_parameter ace_function ace_ts">Event</span><span class="ace_paren ace_rparen">)</span> <span class="ace_keyword ace_operator">=&gt;</span> <span class="ace_keyword">void</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_keyword">void</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">class</span> <span class="ace_identifier">Handler</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_variable ace_parameter ace_function ace_ts">info</span>: <span class="ace_variable ace_parameter ace_function ace_ts">string</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_identifier">onClickBad</span><span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter ace_function ace_ts">this</span>: <span class="ace_variable ace_parameter ace_function ace_ts">Handler</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_variable ace_parameter ace_function ace_ts">e</span>: <span class="ace_variable ace_parameter ace_function ace_ts">Event</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_storage ace_type ace_variable ace_ts">this.</span><span class="ace_identifier">info</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">e</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">message</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">let</span> <span class="ace_identifier">h</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_keyword">new</span> <span class="ace_identifier">Handler</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">uiElement</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">addClickListener</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">h</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">onClickBad</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span> <span class="ace_comment">// <span class="ace_cjk" style="width:NaNpx">报</span><span class="ace_cjk" style="width:NaNpx">错</span>!</span>
</div></div></div></pre>
<p>可以将 <code>onClickBad</code> 中的 <code>this</code> 声明为 <code>void</code> 但这样就无法使用 <code>this.info</code> 了。另一个办法是使用箭头函数做回调函数，但其副作用是：无法在原型链中增加方法，而是为每个实例都创建一个函数。</p>
<h3>3.7 重载</h3>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">function</span> <span class="ace_entity ace_name ace_function">pickCard</span><span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter">x</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_paren ace_lparen">{</span> <span class="ace_variable ace_parameter ace_function ace_ts">suit</span>: <span class="ace_variable ace_parameter ace_function ace_ts">string</span><span class="ace_punctuation ace_operator">;</span> <span class="ace_variable ace_parameter ace_function ace_ts">card</span>: <span class="ace_variable ace_parameter ace_function ace_ts">number</span> <span class="ace_paren ace_rparen">}</span><span class="ace_paren ace_lparen">[</span><span class="ace_paren ace_rparen">])</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_storage ace_type ace_variable ace_ts">number</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">function</span> <span class="ace_entity ace_name ace_function">pickCard</span><span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter">x</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_storage ace_type ace_variable ace_ts">number</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_paren ace_lparen">{</span> <span class="ace_variable ace_parameter ace_function ace_ts">suit</span>: <span class="ace_variable ace_parameter ace_function ace_ts">string</span><span class="ace_punctuation ace_operator">;</span> <span class="ace_variable ace_parameter ace_function ace_ts">card</span>: <span class="ace_variable ace_parameter ace_function ace_ts">number</span> <span class="ace_paren ace_rparen">}</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">function</span> <span class="ace_entity ace_name ace_function">pickCard</span><span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter">x</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">any</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">any</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_keyword">if</span> <span class="ace_paren ace_lparen">(</span><span class="ace_keyword">typeof</span> <span class="ace_identifier">x</span> <span class="ace_keyword ace_operator">==</span> <span class="ace_string">"object"</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_storage ace_type">let</span> <span class="ace_identifier">pickedCard</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_variable ace_language">Math</span><span class="ace_punctuation ace_operator">.</span><span class="ace_support ace_function">floor</span><span class="ace_paren ace_lparen">(</span><span class="ace_entity ace_name ace_function ace_ts">Math.random</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span> <span class="ace_keyword ace_operator">*</span> <span class="ace_identifier">x</span><span class="ace_punctuation ace_operator">.</span><span class="ace_support ace_constant">length</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword">return</span> <span class="ace_identifier">pickedCard</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_keyword">else</span> <span class="ace_keyword">if</span> <span class="ace_paren ace_lparen">(</span><span class="ace_keyword">typeof</span> <span class="ace_identifier">x</span> <span class="ace_keyword ace_operator">==</span> <span class="ace_string">"number"</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_storage ace_type">let</span> <span class="ace_identifier">pickedSuit</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_variable ace_language">Math</span><span class="ace_punctuation ace_operator">.</span><span class="ace_support ace_function">floor</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">x</span> <span class="ace_keyword ace_operator">/</span> <span class="ace_constant ace_numeric">13</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword">return</span> <span class="ace_paren ace_lparen">{</span> <span class="ace_variable ace_parameter ace_function ace_ts">suit</span>: <span class="ace_variable ace_parameter ace_function ace_ts">suits</span><span class="ace_paren ace_lparen">[</span><span class="ace_identifier">pickedSuit</span><span class="ace_paren ace_rparen">]</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_variable ace_parameter ace_function ace_ts">card</span>: <span class="ace_variable ace_parameter ace_function ace_ts">x</span> <span class="ace_keyword ace_operator">%</span> <span class="ace_constant ace_numeric">13</span> <span class="ace_paren ace_rparen">}</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div></div></div></pre>
<p>编译器会按顺序匹配重载函数，因此应该把最特殊的情况写前面，把更通用的情况写后面。</p>
<p><strong>注意</strong>：<code>function pickCard(x): any</code> 并不是重载函数！调用 <code>any</code> 会报错。</p>
<hr>
<h2>4. 字面量(Literal)类型</h2>
<h3>4.1 类型收缩</h3>
<p>使用 <code>const</code> 会把类型收缩 (narrowing).</p>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">// <span class="ace_cjk" style="width:NaNpx">变</span><span class="ace_cjk" style="width:NaNpx">量</span><span class="ace_cjk" style="width:NaNpx">被</span><span class="ace_cjk" style="width:NaNpx">编</span><span class="ace_cjk" style="width:NaNpx">译</span><span class="ace_cjk" style="width:NaNpx">器</span><span class="ace_cjk" style="width:NaNpx">声</span><span class="ace_cjk" style="width:NaNpx">明</span><span class="ace_cjk" style="width:NaNpx">为</span> string <span class="ace_cjk" style="width:NaNpx">类</span><span class="ace_cjk" style="width:NaNpx">型</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">let</span> <span class="ace_identifier">hiWorld</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_string">"Hi World"</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">// <span class="ace_cjk" style="width:NaNpx">声</span><span class="ace_cjk" style="width:NaNpx">明</span><span class="ace_cjk" style="width:NaNpx">为</span> "Hello World" <span class="ace_cjk" style="width:NaNpx">类</span><span class="ace_cjk" style="width:NaNpx">型</span><span class="ace_cjk" style="width:NaNpx">而</span><span class="ace_cjk" style="width:NaNpx">非</span> string</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">const</span> <span class="ace_identifier">helloWorld</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_string">"Hello World"</span><span class="ace_punctuation ace_operator">;</span>
</div></div></div></pre>
<h3>4.2 String</h3>
<p>string 字面量类型可以和 union 类型等配合使用：</p>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">type</span> <span class="ace_identifier">Easing</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_string">"ease-in"</span> | <span class="ace_string">"ease-out"</span> | <span class="ace_string">"ease-in-out"</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword ace_operator ace_ts">class</span> <span class="ace_identifier">UIElement</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_identifier">animate</span><span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter ace_function ace_ts">dx</span>: <span class="ace_variable ace_parameter ace_function ace_ts">number</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_variable ace_parameter ace_function ace_ts">dy</span>: <span class="ace_variable ace_parameter ace_function ace_ts">number</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_variable ace_parameter ace_function ace_ts">easing</span>: <span class="ace_variable ace_parameter ace_function ace_ts">Easing</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword ace_operator">...</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div></div></div></pre>
<p>还可以用来区分重载:</p>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">function</span> <span class="ace_entity ace_name ace_function">createElement</span><span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter">tagName</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_string">"img"</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">HTMLImageElement</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">function</span> <span class="ace_entity ace_name ace_function">createElement</span><span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter">tagName</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_string">"input"</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">HTMLInputElement</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">function</span> <span class="ace_entity ace_name ace_function">createElement</span><span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter">tagName</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_storage ace_type ace_variable ace_ts">string</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">Element</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_comment">// ... </span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div></div></div></pre>
<p>[个人思考] TypeScript 中的字面量是其一种特殊类型，不同于 JS 中的引擎层面的类型。要始终<strong>把它当成一种类型看待</strong>。</p>
<h3>4.3 Numeric</h3>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword ace_operator ace_ts">interface</span> <span class="ace_identifier">MapConfig</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_variable ace_parameter ace_function ace_ts">lng</span>: <span class="ace_variable ace_parameter ace_function ace_ts">number</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_variable ace_parameter ace_function ace_ts">lat</span>: <span class="ace_variable ace_parameter ace_function ace_ts">number</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_variable ace_parameter ace_function ace_ts">tileSize</span>: <span class="ace_variable ace_parameter ace_function ace_ts">8</span> | <span class="ace_constant ace_numeric">16</span> | <span class="ace_constant ace_numeric">32</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div></div></div></pre>
<h3>4.4 Boolean</h3>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword ace_operator ace_ts">interface</span> <span class="ace_identifier">ValidationSuccess</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_variable ace_parameter ace_function ace_ts">isValid</span>: <span class="ace_variable ace_parameter ace_function ace_ts">true</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_variable ace_parameter ace_function ace_ts">reason</span>: <span class="ace_variable ace_parameter ace_function ace_ts">null</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">interface</span> <span class="ace_identifier">ValidationFailure</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_variable ace_parameter ace_function ace_ts">isValid</span>: <span class="ace_variable ace_parameter ace_function ace_ts">false</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_variable ace_parameter ace_function ace_ts">reason</span>: <span class="ace_variable ace_parameter ace_function ace_ts">string</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">type</span> <span class="ace_identifier">ValidationResult</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">ValidationSuccess</span> | <span class="ace_identifier">ValidationFailure</span><span class="ace_punctuation ace_operator">;</span>
</div></div></div></pre>
<hr>
<h2>5. 联合(Unions)和交叉(Intersection)类型</h2>
<h3>5.1 Union 类型</h3>
<p>相比于传统面向对象引入类结构，它更好的保留了动态语言的灵活性，还能保障类型检查。</p>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">function</span> <span class="ace_entity ace_name ace_function">padLeft</span><span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter">value</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_storage ace_type ace_variable ace_ts">string</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_variable ace_parameter ace_function ace_ts">padding</span>: <span class="ace_variable ace_parameter ace_function ace_ts">string</span> | <span class="ace_identifier">number</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_comment">// ...</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div></div></div></pre>
<p>只取其行为共性：</p>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword ace_operator ace_ts">interface</span> <span class="ace_identifier">Bird</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_entity ace_name ace_function ace_ts">fly</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_keyword">void</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_entity ace_name ace_function ace_ts">layEggs</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_keyword">void</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">interface</span> <span class="ace_identifier">Fish</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_entity ace_name ace_function ace_ts">swim</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_keyword">void</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_entity ace_name ace_function ace_ts">layEggs</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_keyword">void</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">declare</span> <span class="ace_storage ace_type">function</span> <span class="ace_entity ace_name ace_function">getSmallPet</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">Fish</span> | <span class="ace_identifier">Bird</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">let</span> <span class="ace_identifier">pet</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_entity ace_name ace_function ace_ts">getSmallPet</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_entity ace_name ace_function ace_ts">pet.layEggs</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>  <span class="ace_comment">// <span class="ace_cjk" style="width:NaNpx">正</span><span class="ace_cjk" style="width:NaNpx">确</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_entity ace_name ace_function ace_ts">pet.swim</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>     <span class="ace_comment">// <span class="ace_cjk" style="width:NaNpx">报</span><span class="ace_cjk" style="width:NaNpx">错</span>!!</span>
</div></div></div></pre>
<p>在 TypeScript 中一个比较实用的技巧:</p>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">type</span> <span class="ace_identifier">NetworkLoadingState</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_identifier">state</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_string">"loading"</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">type</span> <span class="ace_identifier">NetworkFailedState</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_identifier">state</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_string">"failed"</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_variable ace_parameter ace_function ace_ts">code</span>: <span class="ace_variable ace_parameter ace_function ace_ts">number</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">type</span> <span class="ace_identifier">NetworkSuccessState</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_identifier">state</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_string">"success"</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_identifier">response</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_variable ace_parameter ace_function ace_ts">title</span>: <span class="ace_variable ace_parameter ace_function ace_ts">string</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_variable ace_parameter ace_function ace_ts">duration</span>: <span class="ace_variable ace_parameter ace_function ace_ts">number</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_variable ace_parameter ace_function ace_ts">summary</span>: <span class="ace_variable ace_parameter ace_function ace_ts">string</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_paren ace_rparen">}</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">// <span class="ace_cjk" style="width:NaNpx">限</span><span class="ace_cjk" style="width:NaNpx">制</span><span class="ace_cjk" style="width:NaNpx">类</span><span class="ace_cjk" style="width:NaNpx">型</span><span class="ace_cjk" style="width:NaNpx">范</span><span class="ace_cjk" style="width:NaNpx">围</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">type</span> <span class="ace_identifier">NetworkState</span> <span class="ace_keyword ace_operator">=</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  | <span class="ace_identifier">NetworkLoadingState</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  | <span class="ace_identifier">NetworkFailedState</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  | <span class="ace_identifier">NetworkSuccessState</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">function</span> <span class="ace_entity ace_name ace_function">logger</span><span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter">state</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">NetworkState</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_storage ace_type ace_variable ace_ts">string</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_comment">// <span class="ace_cjk" style="width:NaNpx">这</span><span class="ace_cjk" style="width:NaNpx">里</span><span class="ace_cjk" style="width:NaNpx">不</span><span class="ace_cjk" style="width:NaNpx">能</span><span class="ace_cjk" style="width:NaNpx">取</span> state.state <span class="ace_cjk" style="width:NaNpx">以</span><span class="ace_cjk" style="width:NaNpx">外</span><span class="ace_cjk" style="width:NaNpx">的</span> key</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_keyword">switch</span> <span class="ace_paren ace_lparen">(</span><span class="ace_identifier">state</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">state</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword">case</span> <span class="ace_string">"loading"</span><span class="ace_punctuation ace_operator">:</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>  <span class="ace_keyword">return</span> <span class="ace_string">"Downloading..."</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword">case</span> <span class="ace_string">"failed"</span><span class="ace_punctuation ace_operator">:</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>  <span class="ace_comment">// switch <span class="ace_cjk" style="width:NaNpx">之</span><span class="ace_cjk" style="width:NaNpx">后</span><span class="ace_cjk" style="width:NaNpx">，</span><span class="ace_cjk" style="width:NaNpx">编</span><span class="ace_cjk" style="width:NaNpx">译</span><span class="ace_cjk" style="width:NaNpx">器</span><span class="ace_cjk" style="width:NaNpx">可</span><span class="ace_cjk" style="width:NaNpx">以</span><span class="ace_cjk" style="width:NaNpx">分</span><span class="ace_cjk" style="width:NaNpx">析</span><span class="ace_cjk" style="width:NaNpx">出</span><span class="ace_cjk" style="width:NaNpx">其</span><span class="ace_cjk" style="width:NaNpx">类</span><span class="ace_cjk" style="width:NaNpx">型</span><span class="ace_cjk" style="width:NaNpx">为</span> NetworkFailedState</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>  <span class="ace_keyword">return</span> <span class="ace_string ace_quasi ace_start">`</span><span class="ace_string ace_quasi">Error </span><span class="ace_paren ace_quasi ace_start">${</span><span class="ace_identifier">state</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">code</span><span class="ace_paren ace_quasi ace_end">}</span><span class="ace_string ace_quasi"> downloading</span><span class="ace_string ace_quasi ace_end">`</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword">case</span> <span class="ace_string">"success"</span><span class="ace_punctuation ace_operator">:</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>  <span class="ace_keyword">return</span> <span class="ace_string ace_quasi ace_start">`</span><span class="ace_string ace_quasi">Downloaded </span><span class="ace_paren ace_quasi ace_start">${</span><span class="ace_identifier">state</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">response</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">title</span><span class="ace_paren ace_quasi ace_end">}</span><span class="ace_string ace_quasi"> - </span><span class="ace_paren ace_quasi ace_start">${</span><span class="ace_identifier">state</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">response</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">summary</span><span class="ace_paren ace_quasi ace_end">}</span><span class="ace_string ace_quasi ace_end">`</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div></div></div></pre>
<h3>5.2 Intersection 类型</h3>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword ace_operator ace_ts">interface</span> <span class="ace_identifier">ErrorHandling</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_variable ace_parameter ace_function ace_ts">success</span>: <span class="ace_variable ace_parameter ace_function ace_ts">boolean</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_identifier">error</span><span class="ace_keyword ace_operator">?:</span> <span class="ace_paren ace_lparen">{</span> <span class="ace_variable ace_parameter ace_function ace_ts">message</span>: <span class="ace_variable ace_parameter ace_function ace_ts">string</span> <span class="ace_paren ace_rparen">}</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">interface</span> <span class="ace_identifier">ArtworksData</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_identifier">artworks</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_paren ace_lparen">{</span> <span class="ace_variable ace_parameter ace_function ace_ts">title</span>: <span class="ace_variable ace_parameter ace_function ace_ts">string</span> <span class="ace_paren ace_rparen">}</span><span class="ace_paren ace_lparen">[</span><span class="ace_paren ace_rparen">]</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">type</span> <span class="ace_identifier">ArtworksResponse</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">ArtworksData</span> <span class="ace_keyword ace_operator">&amp;</span> <span class="ace_identifier">ErrorHandling</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">const</span> <span class="ace_identifier">handleArtistsResponse</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter ace_function ace_ts">response</span>: <span class="ace_variable ace_parameter ace_function ace_ts">ArtworksResponse</span><span class="ace_paren ace_rparen">)</span> <span class="ace_keyword ace_operator">=&gt;</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_keyword">if</span> <span class="ace_paren ace_lparen">(</span><span class="ace_identifier">response</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">error</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_comment">// ...</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword">return</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_storage ace_type">console</span><span class="ace_punctuation ace_operator">.</span><span class="ace_support ace_function ace_firebug">log</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">response</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">artworks</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span><span class="ace_punctuation ace_operator">;</span>
</div></div></div></pre>
<hr>
<h2>6. 类</h2>
<h3>6.1 定义</h3>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword ace_operator ace_ts">class</span> <span class="ace_identifier">Greeter</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_variable ace_parameter ace_function ace_ts">greeting</span>: <span class="ace_variable ace_parameter ace_function ace_ts">string</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_keyword ace_operator ace_ts">constructor</span><span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter ace_function ace_ts">message</span>: <span class="ace_variable ace_parameter ace_function ace_ts">string</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_storage ace_type ace_variable ace_ts">this.</span><span class="ace_identifier">greeting</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">message</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_identifier">greet</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword">return</span> <span class="ace_string">"Hello, "</span> <span class="ace_keyword ace_operator">+</span> <span class="ace_storage ace_type ace_variable ace_ts">this.</span><span class="ace_identifier">greeting</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">let</span> <span class="ace_identifier">greeter</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_keyword">new</span> <span class="ace_identifier">Greeter</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">"world"</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div></div></div></pre>
<h3>6.2 继承</h3>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword ace_operator ace_ts">class</span> <span class="ace_identifier">Animal</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_variable ace_parameter ace_function ace_ts">name</span>: <span class="ace_variable ace_parameter ace_function ace_ts">string</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_keyword ace_operator ace_ts">constructor</span><span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter ace_function ace_ts">theName</span>: <span class="ace_variable ace_parameter ace_function ace_ts">string</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_storage ace_type ace_variable ace_ts">this.</span><span class="ace_identifier">name</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">theName</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_identifier">move</span><span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter ace_function ace_ts">distanceInMeters</span>: <span class="ace_variable ace_parameter ace_function ace_ts">number</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_constant ace_numeric">0</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_storage ace_type">console</span><span class="ace_punctuation ace_operator">.</span><span class="ace_support ace_function ace_firebug">log</span><span class="ace_paren ace_lparen">(</span><span class="ace_string ace_quasi ace_start">`</span><span class="ace_paren ace_quasi ace_start">${</span><span class="ace_storage ace_type ace_variable ace_ts">this.</span><span class="ace_identifier">name</span><span class="ace_paren ace_quasi ace_end">}</span><span class="ace_string ace_quasi"> moved </span><span class="ace_paren ace_quasi ace_start">${</span><span class="ace_identifier">distanceInMeters</span><span class="ace_paren ace_quasi ace_end">}</span><span class="ace_string ace_quasi">m.</span><span class="ace_string ace_quasi ace_end">`</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">class</span> <span class="ace_identifier">Snake</span> <span class="ace_keyword">extends</span> <span class="ace_identifier">Animal</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_comment">// <span class="ace_cjk" style="width:NaNpx">构</span><span class="ace_cjk" style="width:NaNpx">造</span><span class="ace_cjk" style="width:NaNpx">函</span><span class="ace_cjk" style="width:NaNpx">数</span><span class="ace_cjk" style="width:NaNpx">中</span><span class="ace_cjk" style="width:NaNpx">必</span><span class="ace_cjk" style="width:NaNpx">须</span><span class="ace_cjk" style="width:NaNpx">调</span><span class="ace_cjk" style="width:NaNpx">用</span> super()</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_keyword ace_operator ace_ts">constructor</span><span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter ace_function ace_ts">name</span>: <span class="ace_variable ace_parameter ace_function ace_ts">string</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_storage ace_type ace_variable ace_ts">super</span>(<span class="ace_keyword ace_other ace_ts">name</span>)<span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_comment">// super <span class="ace_cjk" style="width:NaNpx">之</span><span class="ace_cjk" style="width:NaNpx">后</span><span class="ace_cjk" style="width:NaNpx">才</span><span class="ace_cjk" style="width:NaNpx">能</span><span class="ace_cjk" style="width:NaNpx">使</span><span class="ace_cjk" style="width:NaNpx">用</span> this</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_identifier">move</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">distanceInMeters</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_constant ace_numeric">5</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_storage ace_type">console</span><span class="ace_punctuation ace_operator">.</span><span class="ace_support ace_function ace_firebug">log</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">"Slithering..."</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword ace_operator ace_ts">super</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">move</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">distanceInMeters</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">class</span> <span class="ace_identifier">Horse</span> <span class="ace_keyword">extends</span> <span class="ace_identifier">Animal</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_keyword ace_operator ace_ts">constructor</span><span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter ace_function ace_ts">name</span>: <span class="ace_variable ace_parameter ace_function ace_ts">string</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_storage ace_type ace_variable ace_ts">super</span>(<span class="ace_keyword ace_other ace_ts">name</span>)<span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_comment">// <span class="ace_cjk" style="width:NaNpx">子</span><span class="ace_cjk" style="width:NaNpx">类</span><span class="ace_cjk" style="width:NaNpx">覆</span><span class="ace_cjk" style="width:NaNpx">盖</span><span class="ace_cjk" style="width:NaNpx">父</span><span class="ace_cjk" style="width:NaNpx">类</span><span class="ace_cjk" style="width:NaNpx">实</span><span class="ace_cjk" style="width:NaNpx">现</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_identifier">move</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">distanceInMeters</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_constant ace_numeric">45</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_storage ace_type">console</span><span class="ace_punctuation ace_operator">.</span><span class="ace_support ace_function ace_firebug">log</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">"Galloping..."</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword ace_operator ace_ts">super</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">move</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">distanceInMeters</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">let</span> <span class="ace_identifier">sam</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_keyword">new</span> <span class="ace_identifier">Snake</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">"Sammy the Python"</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">// <span class="ace_cjk" style="width:NaNpx">可</span><span class="ace_cjk" style="width:NaNpx">以</span><span class="ace_cjk" style="width:NaNpx">泛</span><span class="ace_cjk" style="width:NaNpx">化</span><span class="ace_cjk" style="width:NaNpx">类</span><span class="ace_cjk" style="width:NaNpx">型</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">let</span> <span class="ace_identifier">tom</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">Animal</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_keyword">new</span> <span class="ace_identifier">Horse</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">"Tommy the Palomino"</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_entity ace_name ace_function ace_ts">sam.move</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">tom</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">move</span><span class="ace_paren ace_lparen">(</span><span class="ace_constant ace_numeric">34</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div></div></div></pre>
<h3>6.3 public 修饰符</h3>
<p>默认是 <code>public</code> 的：</p>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword ace_operator ace_ts">class</span> <span class="ace_identifier">Animal</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_keyword ace_operator ace_ts">public</span> <span class="ace_variable ace_parameter ace_function ace_ts">name</span>: <span class="ace_variable ace_parameter ace_function ace_ts">string</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_keyword ace_operator ace_ts">public</span> <span class="ace_keyword ace_operator ace_ts">constructor</span><span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter ace_function ace_ts">theName</span>: <span class="ace_variable ace_parameter ace_function ace_ts">string</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_storage ace_type ace_variable ace_ts">this.</span><span class="ace_identifier">name</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">theName</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_keyword">public</span> <span class="ace_identifier">move</span><span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter ace_function ace_ts">distanceInMeters</span>: <span class="ace_variable ace_parameter ace_function ace_ts">number</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_storage ace_type">console</span><span class="ace_punctuation ace_operator">.</span><span class="ace_support ace_function ace_firebug">log</span><span class="ace_paren ace_lparen">(</span><span class="ace_string ace_quasi ace_start">`</span><span class="ace_paren ace_quasi ace_start">${</span><span class="ace_storage ace_type ace_variable ace_ts">this.</span><span class="ace_identifier">name</span><span class="ace_paren ace_quasi ace_end">}</span><span class="ace_string ace_quasi"> moved </span><span class="ace_paren ace_quasi ace_start">${</span><span class="ace_identifier">distanceInMeters</span><span class="ace_paren ace_quasi ace_end">}</span><span class="ace_string ace_quasi">m.</span><span class="ace_string ace_quasi ace_end">`</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div></div></div></pre>
<h3>6.4 private 修饰符</h3>
<p>TypeScript 3.8 之后支持 ECMAScript 的私有域：</p>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword ace_operator ace_ts">class</span> <span class="ace_identifier">Animal</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  #<span class="ace_identifier">name</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_storage ace_type ace_variable ace_ts">string</span><span class="ace_punctuation ace_operator">;</span>  <span class="ace_comment">// ECMAScript <span class="ace_cjk" style="width:NaNpx">语</span><span class="ace_cjk" style="width:NaNpx">法</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_keyword ace_operator ace_ts">private</span> <span class="ace_variable ace_parameter ace_function ace_ts">anotherName</span>: <span class="ace_variable ace_parameter ace_function ace_ts">string</span><span class="ace_punctuation ace_operator">;</span>  <span class="ace_comment">// TypeScript <span class="ace_cjk" style="width:NaNpx">语</span><span class="ace_cjk" style="width:NaNpx">法</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_keyword ace_operator ace_ts">constructor</span><span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter ace_function ace_ts">theName</span>: <span class="ace_variable ace_parameter ace_function ace_ts">string</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_variable ace_language">this</span><span class="ace_punctuation ace_operator">.</span>#<span class="ace_identifier">name</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">theName</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div></div></div></pre>
<h3>6.5 protected 修饰符</h3>
<p><code>protected</code> 的属性只能在定义它的类及其子类中使用，不能在外部实例中调用。标记为 <code>protected</code> 的 <code>constructor</code> 不能被实例化，但能被继承。</p>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword ace_operator ace_ts">class</span> <span class="ace_identifier">Person</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_keyword">protected</span> <span class="ace_identifier">name</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_storage ace_type ace_variable ace_ts">string</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_keyword">protected</span> <span class="ace_identifier">constructor</span><span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter ace_function ace_ts">theName</span>: <span class="ace_variable ace_parameter ace_function ace_ts">string</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_storage ace_type ace_variable ace_ts">this.</span><span class="ace_identifier">name</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">theName</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">class</span> <span class="ace_identifier">Employee</span> <span class="ace_keyword">extends</span> <span class="ace_identifier">Person</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_keyword ace_operator ace_ts">private</span> <span class="ace_variable ace_parameter ace_function ace_ts">department</span>: <span class="ace_variable ace_parameter ace_function ace_ts">string</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_keyword ace_operator ace_ts">constructor</span><span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter ace_function ace_ts">name</span>: <span class="ace_variable ace_parameter ace_function ace_ts">string</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_variable ace_parameter ace_function ace_ts">department</span>: <span class="ace_variable ace_parameter ace_function ace_ts">string</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_storage ace_type ace_variable ace_ts">super</span>(<span class="ace_keyword ace_other ace_ts">name</span>)<span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_storage ace_type ace_variable ace_ts">this.</span><span class="ace_identifier">department</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">department</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_keyword">public</span> <span class="ace_identifier">getElevatorPitch</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword">return</span> <span class="ace_string ace_quasi ace_start">`</span><span class="ace_string ace_quasi">Hello, my name is </span><span class="ace_paren ace_quasi ace_start">${</span><span class="ace_storage ace_type ace_variable ace_ts">this.</span><span class="ace_identifier">name</span><span class="ace_paren ace_quasi ace_end">}</span><span class="ace_string ace_quasi"> and I work in </span><span class="ace_paren ace_quasi ace_start">${</span><span class="ace_storage ace_type ace_variable ace_ts">this.</span><span class="ace_identifier">department</span><span class="ace_paren ace_quasi ace_end">}</span><span class="ace_string ace_quasi">.</span><span class="ace_string ace_quasi ace_end">`</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">let</span> <span class="ace_identifier">howard</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_keyword">new</span> <span class="ace_identifier">Employee</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">"Howard"</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_string">"Sales"</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">console</span><span class="ace_punctuation ace_operator">.</span><span class="ace_support ace_function ace_firebug">log</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">howard</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">name</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span> <span class="ace_comment">// <span class="ace_cjk" style="width:NaNpx">报</span><span class="ace_cjk" style="width:NaNpx">错</span>!!!</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">let</span> <span class="ace_identifier">john</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_keyword">new</span> <span class="ace_identifier">Person</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">"John"</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>  <span class="ace_comment">// <span class="ace_cjk" style="width:NaNpx">报</span><span class="ace_cjk" style="width:NaNpx">错</span>!!!</span>
</div></div></div></pre>
<h3>6.6 readonly 修饰符</h3>
<p>必须在声明时初始化或在构造函数中初始化（就像 Java 的 final 修饰符）：</p>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword ace_operator ace_ts">class</span> <span class="ace_identifier">Octopus</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_identifier">readonly</span> <span class="ace_identifier">name</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_storage ace_type ace_variable ace_ts">string</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_identifier">readonly</span> <span class="ace_identifier">numberOfLegs</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_storage ace_type ace_variable ace_ts">number</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_constant ace_numeric">8</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_keyword ace_operator ace_ts">constructor</span><span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter ace_function ace_ts">theName</span>: <span class="ace_variable ace_parameter ace_function ace_ts">string</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_storage ace_type ace_variable ace_ts">this.</span><span class="ace_identifier">name</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">theName</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div></div></div></pre>
<h3>6.7 修饰符可以用于参数</h3>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword ace_operator ace_ts">class</span> <span class="ace_identifier">Octopus</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_identifier">readonly</span> <span class="ace_identifier">numberOfLegs</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_storage ace_type ace_variable ace_ts">number</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_constant ace_numeric">8</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_keyword ace_operator ace_ts">constructor</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">readonly</span> <span class="ace_identifier">name</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_storage ace_type ace_variable ace_ts">string</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span><span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div></div></div></pre>
<h3>6.8 getters/setters</h3>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword ace_operator ace_ts">class</span> <span class="ace_identifier">Employee</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_keyword ace_operator ace_ts">private</span> <span class="ace_variable ace_parameter ace_function ace_ts">_fullName</span>: <span class="ace_variable ace_parameter ace_function ace_ts">string</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_string">""</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_keyword">get</span> <span class="ace_identifier">fullName</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_storage ace_type ace_variable ace_ts">string</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword">return</span> <span class="ace_storage ace_type ace_variable ace_ts">this.</span><span class="ace_identifier">_fullName</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_keyword">set</span> <span class="ace_identifier">fullName</span><span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter ace_function ace_ts">newName</span>: <span class="ace_variable ace_parameter ace_function ace_ts">string</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_comment">// ...</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_storage ace_type ace_variable ace_ts">this.</span><span class="ace_identifier">_fullName</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">newName</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div></div></div></pre>
<ul>
<li>只能在 ECMAScript 5 以上的环境中使用</li>
<li>只有 <code>get</code> 时会自动推断为 <code>readonly</code></li>
</ul>
<h3>6.9 静态属性</h3>
<p>使用 <code>static</code> 修饰：</p>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword ace_operator ace_ts">class</span> <span class="ace_identifier">Grid</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_keyword">static</span> <span class="ace_identifier">origin</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_paren ace_lparen">{</span> <span class="ace_variable ace_parameter ace_function ace_ts">x</span>: <span class="ace_variable ace_parameter ace_function ace_ts">0</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_variable ace_parameter ace_function ace_ts">y</span>: <span class="ace_variable ace_parameter ace_function ace_ts">0</span> <span class="ace_paren ace_rparen">}</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_identifier">calculateDistanceFromOrigin</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">point</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_paren ace_lparen">{</span> <span class="ace_variable ace_parameter ace_function ace_ts">x</span>: <span class="ace_variable ace_parameter ace_function ace_ts">number</span><span class="ace_punctuation ace_operator">;</span> <span class="ace_variable ace_parameter ace_function ace_ts">y</span>: <span class="ace_variable ace_parameter ace_function ace_ts">number</span> <span class="ace_paren ace_rparen">})</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_comment">// <span class="ace_cjk" style="width:NaNpx">直</span><span class="ace_cjk" style="width:NaNpx">接</span><span class="ace_cjk" style="width:NaNpx">使</span><span class="ace_cjk" style="width:NaNpx">用</span><span class="ace_cjk" style="width:NaNpx">类</span><span class="ace_cjk" style="width:NaNpx">名</span><span class="ace_cjk" style="width:NaNpx">调</span><span class="ace_cjk" style="width:NaNpx">用</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_storage ace_type">let</span> <span class="ace_identifier">xDist</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">point</span><span class="ace_punctuation ace_operator">.</span><span class="ace_support ace_constant">x</span> <span class="ace_keyword ace_operator">-</span> <span class="ace_identifier">Grid</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">origin</span><span class="ace_punctuation ace_operator">.</span><span class="ace_support ace_constant">x</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_storage ace_type">let</span> <span class="ace_identifier">yDist</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">point</span><span class="ace_punctuation ace_operator">.</span><span class="ace_support ace_constant">y</span> <span class="ace_keyword ace_operator">-</span> <span class="ace_identifier">Grid</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">origin</span><span class="ace_punctuation ace_operator">.</span><span class="ace_support ace_constant">y</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword">return</span> <span class="ace_variable ace_language">Math</span><span class="ace_punctuation ace_operator">.</span><span class="ace_support ace_function">sqrt</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">xDist</span> <span class="ace_keyword ace_operator">*</span> <span class="ace_identifier">xDist</span> <span class="ace_keyword ace_operator">+</span> <span class="ace_identifier">yDist</span> <span class="ace_keyword ace_operator">*</span> <span class="ace_identifier">yDist</span><span class="ace_paren ace_rparen">)</span> <span class="ace_keyword ace_operator">/</span> <span class="ace_storage ace_type ace_variable ace_ts">this.</span><span class="ace_identifier">scale</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_identifier">constructor</span><span class="ace_paren ace_lparen">(</span><span class="ace_keyword ace_operator ace_ts">public</span> <span class="ace_variable ace_parameter ace_function ace_ts">scale</span>: <span class="ace_variable ace_parameter ace_function ace_ts">number</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span><span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div></div></div></pre>
<h3>6.10 抽象类</h3>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">abstract</span> <span class="ace_keyword">class</span> <span class="ace_identifier">Animal</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_identifier">abstract</span> <span class="ace_identifier">makeSound</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_keyword">void</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_entity ace_name ace_function ace_ts">move</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_keyword">void</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_storage ace_type">console</span><span class="ace_punctuation ace_operator">.</span><span class="ace_support ace_function ace_firebug">log</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">"roaming the earth..."</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div></div></div></pre>
<p>[注] 规则和 Java 基本一样。</p>
<h3>6.11 高级</h3>
<p>直接看例子：</p>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword ace_operator ace_ts">class</span> <span class="ace_identifier">Greeter</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_keyword">static</span> <span class="ace_identifier">standardGreeting</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_string">"Hello, there"</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_variable ace_parameter ace_function ace_ts">greeting</span>: <span class="ace_variable ace_parameter ace_function ace_ts">string</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_entity ace_name ace_function ace_ts">greet</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword">if</span> <span class="ace_paren ace_lparen">(</span><span class="ace_storage ace_type ace_variable ace_ts">this.</span><span class="ace_identifier">greeting</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>  <span class="ace_keyword">return</span> <span class="ace_string">"Hello, "</span> <span class="ace_keyword ace_operator">+</span> <span class="ace_storage ace_type ace_variable ace_ts">this.</span><span class="ace_identifier">greeting</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_paren ace_rparen">}</span> <span class="ace_keyword">else</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>  <span class="ace_keyword">return</span> <span class="ace_identifier">Greeter</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">standardGreeting</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">let</span> <span class="ace_identifier">greeter1</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">Greeter</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">greeter1</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_keyword">new</span> <span class="ace_identifier">Greeter</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">console</span><span class="ace_punctuation ace_operator">.</span><span class="ace_support ace_function ace_firebug">log</span><span class="ace_paren ace_lparen">(</span><span class="ace_entity ace_name ace_function ace_ts">greeter1.greet</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span> <span class="ace_comment">// "Hello, there"</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">let</span> <span class="ace_identifier">greeterMaker</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_keyword">typeof</span> <span class="ace_identifier">Greeter</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">Greeter</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">greeterMaker</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">standardGreeting</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_string">"Hey there!"</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">let</span> <span class="ace_identifier">greeter2</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">Greeter</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_keyword">new</span> <span class="ace_identifier">greeterMaker</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">console</span><span class="ace_punctuation ace_operator">.</span><span class="ace_support ace_function ace_firebug">log</span><span class="ace_paren ace_lparen">(</span><span class="ace_entity ace_name ace_function ace_ts">greeter2.greet</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span> <span class="ace_comment">// "Hey there!"</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">let</span> <span class="ace_identifier">greeter3</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">Greeter</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">greeter3</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_keyword">new</span> <span class="ace_identifier">Greeter</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">console</span><span class="ace_punctuation ace_operator">.</span><span class="ace_support ace_function ace_firebug">log</span><span class="ace_paren ace_lparen">(</span><span class="ace_entity ace_name ace_function ace_ts">greeter3.greet</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span> <span class="ace_comment">// "Hey there!"</span>
</div></div></div></pre>
<p>类用作接口：</p>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword ace_operator ace_ts">class</span> <span class="ace_identifier">Point</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_variable ace_parameter ace_function ace_ts">x</span>: <span class="ace_variable ace_parameter ace_function ace_ts">number</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_variable ace_parameter ace_function ace_ts">y</span>: <span class="ace_variable ace_parameter ace_function ace_ts">number</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">interface</span> <span class="ace_identifier">Point3d</span> <span class="ace_keyword">extends</span> <span class="ace_identifier">Point</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_variable ace_parameter ace_function ace_ts">z</span>: <span class="ace_variable ace_parameter ace_function ace_ts">number</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">let</span> <span class="ace_identifier">point3d</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">Point3d</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_paren ace_lparen">{</span> <span class="ace_variable ace_parameter ace_function ace_ts">x</span>: <span class="ace_variable ace_parameter ace_function ace_ts">1</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_variable ace_parameter ace_function ace_ts">y</span>: <span class="ace_variable ace_parameter ace_function ace_ts">2</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_variable ace_parameter ace_function ace_ts">z</span>: <span class="ace_variable ace_parameter ace_function ace_ts">3</span> <span class="ace_paren ace_rparen">}</span><span class="ace_punctuation ace_operator">;</span>
</div></div></div></pre>
<hr>
<h2>7. 枚举</h2>
<h3>7.1 数字枚举</h3>
<p>定义：</p>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">enum</span> <span class="ace_identifier">Direction</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_identifier">Up</span><span class="ace_punctuation ace_operator">,</span>    <span class="ace_comment">// 0</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_identifier">Down</span><span class="ace_punctuation ace_operator">,</span>  <span class="ace_comment">// 1</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_identifier">Left</span><span class="ace_punctuation ace_operator">,</span>  <span class="ace_comment">// 2</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_identifier">Right</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_comment">// 3</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div></div></div></pre>
<p>设置初始值:</p>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">enum</span> <span class="ace_identifier">Direction</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_identifier">Up</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_constant ace_numeric">1</span><span class="ace_punctuation ace_operator">,</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_identifier">Down</span><span class="ace_punctuation ace_operator">,</span>   <span class="ace_comment">// 2</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_identifier">Left</span><span class="ace_punctuation ace_operator">,</span>   <span class="ace_comment">// 3</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_identifier">Right</span><span class="ace_punctuation ace_operator">,</span>  <span class="ace_comment">// 4</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div></div></div></pre>
<p>使用：</p>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">enum</span> <span class="ace_identifier">UserResponse</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_identifier">No</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_constant ace_numeric">0</span><span class="ace_punctuation ace_operator">,</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_identifier">Yes</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_constant ace_numeric">1</span><span class="ace_punctuation ace_operator">,</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">function</span> <span class="ace_entity ace_name ace_function">respond</span><span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter">recipient</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_storage ace_type ace_variable ace_ts">string</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_variable ace_parameter ace_function ace_ts">message</span>: <span class="ace_variable ace_parameter ace_function ace_ts">UserResponse</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_keyword">void</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_comment">// ...</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">// <span class="ace_cjk" style="width:NaNpx">直</span><span class="ace_cjk" style="width:NaNpx">接</span><span class="ace_cjk" style="width:NaNpx">通</span><span class="ace_cjk" style="width:NaNpx">过</span><span class="ace_cjk" style="width:NaNpx">名</span><span class="ace_cjk" style="width:NaNpx">字</span><span class="ace_cjk" style="width:NaNpx">调</span><span class="ace_cjk" style="width:NaNpx">用</span><span class="ace_cjk" style="width:NaNpx">即</span><span class="ace_cjk" style="width:NaNpx">可</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">respond</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">"Princess Caroline"</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_identifier">UserResponse</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">Yes</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div></div></div></pre>
<h3>7.2 String 枚举</h3>
<p>不支持自增。好处是便于运行时跟踪其值。</p>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">enum</span> <span class="ace_identifier">Direction</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_identifier">Up</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_string">"UP"</span><span class="ace_punctuation ace_operator">,</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_identifier">Down</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_string">"DOWN"</span><span class="ace_punctuation ace_operator">,</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_identifier">Left</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_string">"LEFT"</span><span class="ace_punctuation ace_operator">,</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_identifier">Right</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_string">"RIGHT"</span><span class="ace_punctuation ace_operator">,</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div></div></div></pre>
<h3>7.3 常量成员和计算成员</h3>
<p>(具体的规则可以查阅官方文档，大概的含义看例子即可)</p>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">enum</span> <span class="ace_identifier">FileAccess</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_comment">// <span class="ace_cjk" style="width:NaNpx">常</span><span class="ace_cjk" style="width:NaNpx">量</span><span class="ace_cjk" style="width:NaNpx">成</span><span class="ace_cjk" style="width:NaNpx">员</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_identifier">None</span><span class="ace_punctuation ace_operator">,</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_identifier">Read</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_constant ace_numeric">1</span> <span class="ace_keyword ace_operator">&lt;&lt;</span> <span class="ace_constant ace_numeric">1</span><span class="ace_punctuation ace_operator">,</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_identifier">Write</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_constant ace_numeric">1</span> <span class="ace_keyword ace_operator">&lt;&lt;</span> <span class="ace_constant ace_numeric">2</span><span class="ace_punctuation ace_operator">,</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_identifier">ReadWrite</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">Read</span> | <span class="ace_identifier">Write</span><span class="ace_punctuation ace_operator">,</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_comment">// <span class="ace_cjk" style="width:NaNpx">计</span><span class="ace_cjk" style="width:NaNpx">算</span><span class="ace_cjk" style="width:NaNpx">成</span><span class="ace_cjk" style="width:NaNpx">员</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_identifier">G</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_string">"123"</span><span class="ace_punctuation ace_operator">.</span><span class="ace_support ace_constant">length</span><span class="ace_punctuation ace_operator">,</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_identifier">H</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_entity ace_name ace_function ace_ts">getSomeValue</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">,</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div></div></div></pre>
<h3>7.4 获取枚举名字</h3>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">enum</span> <span class="ace_identifier">Enum</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_identifier">A</span><span class="ace_punctuation ace_operator">,</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">let</span> <span class="ace_identifier">a</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">Enum</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">A</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">let</span> <span class="ace_identifier">nameOfA</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">Enum</span><span class="ace_paren ace_lparen">[</span><span class="ace_identifier">a</span><span class="ace_paren ace_rparen">]</span><span class="ace_punctuation ace_operator">;</span> <span class="ace_comment">// "A"</span>
</div></div></div></pre>
<h3>7.5 其它</h3>
<p>[注] 还有其它很多特性，我感觉使用场景不是很多，从略。</p>
<hr>
<h2>8. 泛型</h2>
<p>(在面向对象语言中很普遍，简单记几个例子)</p>
<h3>8.1 定义</h3>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">function</span> <span class="ace_identifier">identity</span><span class="ace_keyword ace_operator">&lt;</span><span class="ace_identifier">T</span><span class="ace_keyword ace_operator">&gt;</span><span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter ace_function ace_ts">arg</span>: <span class="ace_variable ace_parameter ace_function ace_ts">T</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">T</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_keyword">return</span> <span class="ace_identifier">arg</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">// <span class="ace_cjk" style="width:NaNpx">调</span><span class="ace_cjk" style="width:NaNpx">用</span><span class="ace_cjk" style="width:NaNpx">时</span><span class="ace_cjk" style="width:NaNpx">：</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">let</span> <span class="ace_identifier">output</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">identity</span><span class="ace_keyword ace_operator">&lt;</span><span class="ace_storage ace_type ace_variable ace_ts">string</span><span class="ace_keyword ace_operator">&gt;</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">"myString"</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">// <span class="ace_cjk" style="width:NaNpx">或</span><span class="ace_cjk" style="width:NaNpx">直</span><span class="ace_cjk" style="width:NaNpx">接</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">let</span> <span class="ace_identifier">output</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">identity</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">"myString"</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div></div></div></pre>
<h3>8.2 泛型类型变量</h3>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">function</span> <span class="ace_identifier">loggingIdentity</span><span class="ace_keyword ace_operator">&lt;</span><span class="ace_identifier">T</span><span class="ace_keyword ace_operator">&gt;</span><span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter ace_function ace_ts">arg</span>: <span class="ace_variable ace_parameter ace_function ace_ts">T</span><span class="ace_paren ace_lparen">[</span><span class="ace_paren ace_rparen">])</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">T</span><span class="ace_paren ace_lparen">[</span><span class="ace_paren ace_rparen">]</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_keyword">return</span> <span class="ace_identifier">arg</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">// <span class="ace_cjk" style="width:NaNpx">等</span><span class="ace_cjk" style="width:NaNpx">价</span><span class="ace_cjk" style="width:NaNpx">于</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">function</span> <span class="ace_identifier">loggingIdentity</span><span class="ace_keyword ace_operator">&lt;</span><span class="ace_identifier">T</span><span class="ace_keyword ace_operator">&gt;</span><span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter ace_function ace_ts">arg</span>: <span class="ace_variable ace_parameter ace_function ace_ts">Array</span><span class="ace_meta ace_tag ace_punctuation ace_tag-open ace_xml">&lt;</span><span class="ace_meta ace_tag ace_tag-name ace_xml">T</span><span class="ace_meta ace_tag ace_punctuation ace_tag-close ace_xml">&gt;</span><span class="ace_string">): Array</span><span class="ace_meta ace_tag ace_punctuation ace_tag-open ace_xml">&lt;</span><span class="ace_meta ace_tag ace_tag-name ace_xml">T</span><span class="ace_meta ace_tag ace_punctuation ace_tag-close ace_xml">&gt;</span><span class="ace_string"> </span><span class="ace_paren ace_quasi ace_start">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_keyword">return</span> <span class="ace_identifier">arg</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_quasi ace_end">}</span>
</div></div></div></pre>
<h3>8.3 泛型类型</h3>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">function</span> <span class="ace_identifier">identity</span><span class="ace_keyword ace_operator">&lt;</span><span class="ace_identifier">T</span><span class="ace_keyword ace_operator">&gt;</span><span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter ace_function ace_ts">arg</span>: <span class="ace_variable ace_parameter ace_function ace_ts">T</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">T</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_keyword">return</span> <span class="ace_identifier">arg</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">// <span class="ace_cjk" style="width:NaNpx">用</span> T <span class="ace_cjk" style="width:NaNpx">还</span><span class="ace_cjk" style="width:NaNpx">是</span><span class="ace_cjk" style="width:NaNpx">用</span> U <span class="ace_cjk" style="width:NaNpx">随</span><span class="ace_cjk" style="width:NaNpx">意</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">let</span> <span class="ace_identifier">myIdentity</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_meta ace_tag ace_punctuation ace_tag-open ace_xml">&lt;</span><span class="ace_meta ace_tag ace_tag-name ace_xml">U</span><span class="ace_meta ace_tag ace_punctuation ace_tag-close ace_xml">&gt;</span><span class="ace_string">(arg: U) =&gt; U = identity;</span>
</div></div></div></pre>
<h3>8.4 定义接口中的方法声明</h3>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword ace_operator ace_ts">interface</span> <span class="ace_identifier">GenericIdentityFn</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_meta ace_tag ace_punctuation ace_tag-open ace_xml">&lt;</span><span class="ace_meta ace_tag ace_tag-name ace_xml">T</span><span class="ace_meta ace_tag ace_punctuation ace_tag-close ace_xml">&gt;</span><span class="ace_string">(arg: T): T;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_string">}</span>
</div></div></div></pre>
<h3>8.5 接口中使用</h3>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword ace_operator ace_ts">interface</span> <span class="ace_identifier">GenericIdentityFn</span><span class="ace_keyword ace_operator">&lt;</span><span class="ace_identifier">T</span><span class="ace_keyword ace_operator">&gt;</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter ace_function ace_ts">arg</span>: <span class="ace_variable ace_parameter ace_function ace_ts">T</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">T</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div></div></div></pre>
<h3>8.6 类中使用</h3>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword ace_operator ace_ts">class</span> <span class="ace_identifier">GenericNumber</span><span class="ace_keyword ace_operator">&lt;</span><span class="ace_identifier">T</span><span class="ace_keyword ace_operator">&gt;</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_variable ace_parameter ace_function ace_ts">zeroValue</span>: <span class="ace_variable ace_parameter ace_function ace_ts">T</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_identifier">add</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter ace_function ace_ts">x</span>: <span class="ace_variable ace_parameter ace_function ace_ts">T</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_variable ace_parameter ace_function ace_ts">y</span>: <span class="ace_variable ace_parameter ace_function ace_ts">T</span><span class="ace_paren ace_rparen">)</span> <span class="ace_keyword ace_operator">=&gt;</span> <span class="ace_identifier">T</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div></div></div></pre>
<h3>8.7 泛型约束</h3>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword ace_operator ace_ts">interface</span> <span class="ace_identifier">Lengthwise</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_variable ace_parameter ace_function ace_ts">length</span>: <span class="ace_variable ace_parameter ace_function ace_ts">number</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">function</span> <span class="ace_identifier">loggingIdentity</span><span class="ace_keyword ace_operator">&lt;</span><span class="ace_identifier">T</span> <span class="ace_keyword">extends</span> <span class="ace_identifier">Lengthwise</span><span class="ace_keyword ace_operator">&gt;</span><span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter ace_function ace_ts">arg</span>: <span class="ace_variable ace_parameter ace_function ace_ts">T</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">T</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_storage ace_type">console</span><span class="ace_punctuation ace_operator">.</span><span class="ace_support ace_function ace_firebug">log</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">arg</span><span class="ace_punctuation ace_operator">.</span><span class="ace_support ace_constant">length</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_keyword">return</span> <span class="ace_identifier">arg</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div></div></div></pre>
<p>在泛型约束中使用类型参数：</p>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">function</span> <span class="ace_identifier">getProperty</span><span class="ace_keyword ace_operator">&lt;</span><span class="ace_identifier">T</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_identifier">K</span> <span class="ace_keyword">extends</span> <span class="ace_identifier">keyof</span> <span class="ace_identifier">T</span><span class="ace_keyword ace_operator">&gt;</span><span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter ace_function ace_ts">obj</span>: <span class="ace_variable ace_parameter ace_function ace_ts">T</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_variable ace_parameter ace_function ace_ts">key</span>: <span class="ace_variable ace_parameter ace_function ace_ts">K</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_keyword">return</span> <span class="ace_identifier">obj</span><span class="ace_paren ace_lparen">[</span><span class="ace_identifier">key</span><span class="ace_paren ace_rparen">]</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">let</span> <span class="ace_identifier">x</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_paren ace_lparen">{</span> <span class="ace_variable ace_parameter ace_function ace_ts">a</span>: <span class="ace_variable ace_parameter ace_function ace_ts">1</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_variable ace_parameter ace_function ace_ts">b</span>: <span class="ace_variable ace_parameter ace_function ace_ts">2</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_variable ace_parameter ace_function ace_ts">c</span>: <span class="ace_variable ace_parameter ace_function ace_ts">3</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_variable ace_parameter ace_function ace_ts">d</span>: <span class="ace_variable ace_parameter ace_function ace_ts">4</span> <span class="ace_paren ace_rparen">}</span><span class="ace_punctuation ace_operator">;</span>
</div></div></div></pre>
<h3>8.8 泛型中使用 Class 类型</h3>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword ace_operator ace_ts">class</span> <span class="ace_identifier">BeeKeeper</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_variable ace_parameter ace_function ace_ts">hasMask</span>: <span class="ace_variable ace_parameter ace_function ace_ts">boolean</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">class</span> <span class="ace_identifier">ZooKeeper</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_variable ace_parameter ace_function ace_ts">nametag</span>: <span class="ace_variable ace_parameter ace_function ace_ts">string</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">class</span> <span class="ace_identifier">Animal</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_variable ace_parameter ace_function ace_ts">numLegs</span>: <span class="ace_variable ace_parameter ace_function ace_ts">number</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">class</span> <span class="ace_identifier">Bee</span> <span class="ace_keyword">extends</span> <span class="ace_identifier">Animal</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_variable ace_parameter ace_function ace_ts">keeper</span>: <span class="ace_variable ace_parameter ace_function ace_ts">BeeKeeper</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">class</span> <span class="ace_identifier">Lion</span> <span class="ace_keyword">extends</span> <span class="ace_identifier">Animal</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_variable ace_parameter ace_function ace_ts">keeper</span>: <span class="ace_variable ace_parameter ace_function ace_ts">ZooKeeper</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">function</span> <span class="ace_identifier">createInstance</span><span class="ace_keyword ace_operator">&lt;</span><span class="ace_identifier">A</span> <span class="ace_keyword">extends</span> <span class="ace_identifier">Animal</span><span class="ace_keyword ace_operator">&gt;</span><span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter ace_function ace_ts">c</span>: <span class="ace_variable ace_parameter ace_function ace_ts">new</span> <span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span> <span class="ace_keyword ace_operator">=&gt;</span> <span class="ace_identifier">A</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">A</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_keyword">return</span> <span class="ace_keyword">new</span> <span class="ace_identifier">c</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">createInstance</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">Lion</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">keeper</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">nametag</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">createInstance</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">Bee</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">keeper</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">hasMask</span><span class="ace_punctuation ace_operator">;</span>
</div></div></div></pre>
<hr>
<h1>1. 高级类型</h1>
<h2>1.1 区分类型</h2>
<p>使用 type assertion 获取实际的类型：</p>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">let</span> <span class="ace_identifier">pet</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_entity ace_name ace_function ace_ts">getSmallPet</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">let</span> <span class="ace_identifier">fishPet</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">pet</span> <span class="ace_identifier">as</span> <span class="ace_identifier">Fish</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">let</span> <span class="ace_identifier">birdPet</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">pet</span> <span class="ace_identifier">as</span> <span class="ace_identifier">Bird</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">if</span> <span class="ace_paren ace_lparen">(</span><span class="ace_identifier">fishPet</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">swim</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_entity ace_name ace_function ace_ts">fishPet.swim</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span> <span class="ace_keyword">else</span> <span class="ace_keyword">if</span> <span class="ace_paren ace_lparen">(</span><span class="ace_identifier">birdPet</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">fly</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_entity ace_name ace_function ace_ts">birdPet.fly</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div></div></div></pre>
<p>但不是最好的方式，可以用 type predicate 来自定义类型守卫：</p>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">// <span class="ace_cjk" style="width:NaNpx">注</span><span class="ace_cjk" style="width:NaNpx">意</span> pet is Fish<span class="ace_cjk" style="width:NaNpx">，</span>pet <span class="ace_cjk" style="width:NaNpx">必</span><span class="ace_cjk" style="width:NaNpx">须</span><span class="ace_cjk" style="width:NaNpx">是</span><span class="ace_cjk" style="width:NaNpx">当</span><span class="ace_cjk" style="width:NaNpx">前</span><span class="ace_cjk" style="width:NaNpx">函</span><span class="ace_cjk" style="width:NaNpx">数</span><span class="ace_cjk" style="width:NaNpx">签</span><span class="ace_cjk" style="width:NaNpx">名</span><span class="ace_cjk" style="width:NaNpx">中</span><span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">参</span><span class="ace_cjk" style="width:NaNpx">数</span><span class="ace_cjk" style="width:NaNpx">名</span><span class="ace_cjk" style="width:NaNpx">之</span><span class="ace_cjk" style="width:NaNpx">一</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">function</span> <span class="ace_entity ace_name ace_function">isFish</span><span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter">pet</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">Fish</span> | <span class="ace_identifier">Bird</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">pet</span> <span class="ace_identifier">is</span> <span class="ace_identifier">Fish</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_keyword">return</span> <span class="ace_paren ace_lparen">(</span><span class="ace_identifier">pet</span> <span class="ace_identifier">as</span> <span class="ace_identifier">Fish</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">swim</span> <span class="ace_keyword ace_operator">!==</span> <span class="ace_constant ace_language">undefined</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">let</span> <span class="ace_identifier">pet</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_entity ace_name ace_function ace_ts">getSmallPet</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">if</span> <span class="ace_paren ace_lparen">(</span><span class="ace_identifier">isFish</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">pet</span><span class="ace_paren ace_rparen">))</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_entity ace_name ace_function ace_ts">pet.swim</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span> <span class="ace_keyword">else</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_entity ace_name ace_function ace_ts">pet.fly</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div></div></div></pre>
<p>使用 <code>in</code> 也可以将 <code>union</code> 类型收缩：</p>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">function</span> <span class="ace_entity ace_name ace_function">move</span><span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter">pet</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">Fish</span> | <span class="ace_identifier">Bird</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_keyword">if</span> <span class="ace_paren ace_lparen">(</span><span class="ace_string">"swim"</span> <span class="ace_keyword">in</span> <span class="ace_identifier">pet</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword">return</span> <span class="ace_entity ace_name ace_function ace_ts">pet.swim</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_keyword">return</span> <span class="ace_entity ace_name ace_function ace_ts">pet.fly</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div></div></div></pre>
<p><code>typeof</code> 的类型检测会被编译器自动进行类型收缩（减少不必要的 type predicate）。<code>instanceof</code> 有同样的效果，其右侧必需为构造函数。</p>
<h2>1.2 可空类型</h2>
<p>默认情况下 <code>null</code> 和 <code>undefined</code> 是其它所有类型的子类。开启 <code>--strictNullChecks</code> 后</p>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">let</span> <span class="ace_identifier">exampleString</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_string">"foo"</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">exampleString</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_constant ace_language">null</span><span class="ace_punctuation ace_operator">;</span>  <span class="ace_comment">// <span class="ace_cjk" style="width:NaNpx">报</span><span class="ace_cjk" style="width:NaNpx">错</span>!!</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">let</span> <span class="ace_identifier">stringOrNull</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_storage ace_type ace_variable ace_ts">string</span> | <span class="ace_constant ace_language">null</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_string">"bar"</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">stringOrNull</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_constant ace_language">null</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">stringOrNull</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_constant ace_language">undefined</span><span class="ace_punctuation ace_operator">;</span>  <span class="ace_comment">// <span class="ace_cjk" style="width:NaNpx">报</span><span class="ace_cjk" style="width:NaNpx">错</span>!!</span>
</div></div></div></pre>
<p>对于可选参数，会自动添加一个 <code>| undefined</code> 进来(但是 <code>null</code> 不可以)。</p>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword ace_operator ace_ts">class</span> <span class="ace_identifier">C</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_variable ace_parameter ace_function ace_ts">a</span>: <span class="ace_variable ace_parameter ace_function ace_ts">number</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_variable ace_parameter ace_function ace_ts">b?</span>: <span class="ace_variable ace_parameter ace_function ace_ts">number</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">let</span> <span class="ace_identifier">c</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_keyword">new</span> <span class="ace_identifier">C</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">c</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">a</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_constant ace_numeric">12</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">c</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">a</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_constant ace_language">undefined</span><span class="ace_punctuation ace_operator">;</span>  <span class="ace_comment">// <span class="ace_cjk" style="width:NaNpx">报</span><span class="ace_cjk" style="width:NaNpx">错</span>!!</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">c</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">b</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_constant ace_numeric">13</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">c</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">b</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_constant ace_language">undefined</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">c</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">b</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_constant ace_language">null</span><span class="ace_punctuation ace_operator">;</span>       <span class="ace_comment">// <span class="ace_cjk" style="width:NaNpx">报</span><span class="ace_cjk" style="width:NaNpx">错</span>!!</span>
</div></div></div></pre>
<p>可以看出，可空类型是通过 union 实现的，所以需要对 null 特殊处理：</p>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">function</span> <span class="ace_entity ace_name ace_function">f</span><span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter">stringOrNull</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_storage ace_type ace_variable ace_ts">string</span> | <span class="ace_constant ace_language">null</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_storage ace_type ace_variable ace_ts">string</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_keyword">if</span> <span class="ace_paren ace_lparen">(</span><span class="ace_identifier">stringOrNull</span> <span class="ace_keyword ace_operator">===</span> <span class="ace_constant ace_language">null</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword">return</span> <span class="ace_string">"default"</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_paren ace_rparen">}</span> <span class="ace_keyword">else</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword">return</span> <span class="ace_identifier">stringOrNull</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div></div></div></pre>
<p>TypeScript 也支持 ECMAScript 的语法：</p>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">function</span> <span class="ace_entity ace_name ace_function">f</span><span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter">stringOrNull</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_storage ace_type ace_variable ace_ts">string</span> | <span class="ace_constant ace_language">null</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_storage ace_type ace_variable ace_ts">string</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_keyword">return</span> <span class="ace_identifier">stringOrNull</span> <span class="ace_punctuation ace_operator">??</span> <span class="ace_string">"default"</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div></div></div></pre>
<h2>1.3 类型别名</h2>
<p>有点像接口，但是可以给原生类型、union、元组等任何类型定义别名。</p>
<pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">type</span> <span class="ace_identifier">Second</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_storage ace_type ace_variable ace_ts">number</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">let</span> <span class="ace_identifier">timeInSecond</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_storage ace_type ace_variable ace_ts">number</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_constant ace_numeric">10</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">let</span> <span class="ace_identifier">time</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">Second</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_constant ace_numeric">10</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">type</span> <span class="ace_identifier">Container</span><span class="ace_keyword ace_operator">&lt;</span><span class="ace_identifier">T</span><span class="ace_keyword ace_operator">&gt;</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_paren ace_lparen">{</span> <span class="ace_variable ace_parameter ace_function ace_ts">value</span>: <span class="ace_variable ace_parameter ace_function ace_ts">T</span> <span class="ace_paren ace_rparen">}</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">type</span> <span class="ace_identifier">Tree</span><span class="ace_keyword ace_operator">&lt;</span><span class="ace_identifier">T</span><span class="ace_keyword ace_operator">&gt;</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_variable ace_parameter ace_function ace_ts">value</span>: <span class="ace_variable ace_parameter ace_function ace_ts">T</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_variable ace_parameter ace_function ace_ts">left?</span>: <span class="ace_variable ace_parameter ace_function ace_ts">Tree</span><span class="ace_meta ace_tag ace_punctuation ace_tag-open ace_xml">&lt;</span><span class="ace_meta ace_tag ace_tag-name ace_xml">T</span><span class="ace_meta ace_tag ace_punctuation ace_tag-close ace_xml">&gt;</span><span class="ace_string">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_string">  right?: Tree</span><span class="ace_meta ace_tag ace_punctuation ace_tag-open ace_xml">&lt;</span><span class="ace_meta ace_tag ace_tag-name ace_xml">T</span><span class="ace_meta ace_tag ace_punctuation ace_tag-close ace_xml">&gt;</span><span class="ace_string">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_string">};</span>
</div></div></div></pre>
<p>接口可继承，而 Type 只能通过 intersection 来扩展属性：</p>
<table>
  <tbody><tr>
    <td>
    <pre>interface Animal {
  name: string
}
interface Bear extends Animal {
  honey: boolean
}
const bear = getBear() 
bear.name
bear.honey</pre>
    </td>
    <td>
    <pre>type Animal = {
  name: string
}
type Bear = Animal &amp; { 
  honey: Boolean 
}
const bear = getBear();
bear.name;
bear.honey;</pre>
    </td>
  </tr>
</tbody></table><p>别名一般用在 union 或 tuple 中，通常情况下更推荐使用接口。</p><h2>1.4 多态的 this 类型</h2><p>返回其类型或子类型的 this ，构造流式 API ：</p><pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword ace_operator ace_ts">class</span> <span class="ace_identifier">BasicCalculator</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_keyword ace_operator ace_ts">public</span> <span class="ace_keyword ace_operator ace_ts">constructor</span><span class="ace_paren ace_lparen">(</span><span class="ace_keyword">protected</span> <span class="ace_identifier">value</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_storage ace_type ace_variable ace_ts">number</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_constant ace_numeric">0</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span><span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_keyword">public</span> <span class="ace_identifier">currentValue</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_storage ace_type ace_variable ace_ts">number</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword">return</span> <span class="ace_storage ace_type ace_variable ace_ts">this.</span><span class="ace_identifier">value</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_keyword">public</span> <span class="ace_identifier">add</span><span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter ace_function ace_ts">operand</span>: <span class="ace_variable ace_parameter ace_function ace_ts">number</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_variable ace_language">this</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_storage ace_type ace_variable ace_ts">this.</span><span class="ace_identifier">value</span> <span class="ace_keyword ace_operator">+=</span> <span class="ace_identifier">operand</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword">return</span> <span class="ace_variable ace_language">this</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_keyword">public</span> <span class="ace_identifier">multiply</span><span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter ace_function ace_ts">operand</span>: <span class="ace_variable ace_parameter ace_function ace_ts">number</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_variable ace_language">this</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_storage ace_type ace_variable ace_ts">this.</span><span class="ace_identifier">value</span> <span class="ace_keyword ace_operator">*=</span> <span class="ace_identifier">operand</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword">return</span> <span class="ace_variable ace_language">this</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_comment">// ...</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">let</span> <span class="ace_identifier">v</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_keyword">new</span> <span class="ace_identifier">BasicCalculator</span><span class="ace_paren ace_lparen">(</span><span class="ace_constant ace_numeric">2</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">multiply</span><span class="ace_paren ace_lparen">(</span><span class="ace_constant ace_numeric">5</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">.</span><span class="ace_support ace_function ace_dom">add</span><span class="ace_paren ace_lparen">(</span><span class="ace_constant ace_numeric">1</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">currentValue</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
</div></div></div></pre><h2>1.5 索引类型</h2><pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">function</span> <span class="ace_identifier">pluck</span><span class="ace_keyword ace_operator">&lt;</span><span class="ace_identifier">T</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_identifier">K</span> <span class="ace_keyword">extends</span> <span class="ace_identifier">keyof</span> <span class="ace_identifier">T</span><span class="ace_keyword ace_operator">&gt;</span><span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter ace_function ace_ts">o</span>: <span class="ace_variable ace_parameter ace_function ace_ts">T</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_variable ace_parameter ace_function ace_ts">propertyNames</span>: <span class="ace_variable ace_parameter ace_function ace_ts">K</span><span class="ace_paren ace_lparen">[</span><span class="ace_paren ace_rparen">])</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">T</span><span class="ace_paren ace_lparen">[</span><span class="ace_identifier">K</span><span class="ace_paren ace_rparen">]</span><span class="ace_paren ace_lparen">[</span><span class="ace_paren ace_rparen">]</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_keyword">return</span> <span class="ace_identifier">propertyNames</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">map</span><span class="ace_paren ace_lparen">((</span><span class="ace_identifier">n</span><span class="ace_paren ace_rparen">)</span> <span class="ace_keyword ace_operator">=&gt;</span> <span class="ace_identifier">o</span><span class="ace_paren ace_lparen">[</span><span class="ace_identifier">n</span><span class="ace_paren ace_rparen">])</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">interface</span> <span class="ace_identifier">Car</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_variable ace_parameter ace_function ace_ts">manufacturer</span>: <span class="ace_variable ace_parameter ace_function ace_ts">string</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_variable ace_parameter ace_function ace_ts">model</span>: <span class="ace_variable ace_parameter ace_function ace_ts">string</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_variable ace_parameter ace_function ace_ts">year</span>: <span class="ace_variable ace_parameter ace_function ace_ts">number</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">let</span> <span class="ace_identifier">taxi</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">Car</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_identifier">manufacturer</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_string">"Toyota"</span><span class="ace_punctuation ace_operator">,</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_identifier">model</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_string">"Camry"</span><span class="ace_punctuation ace_operator">,</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_variable ace_parameter ace_function ace_ts">year</span>: <span class="ace_variable ace_parameter ace_function ace_ts">2014</span><span class="ace_punctuation ace_operator">,</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">let</span> <span class="ace_identifier">makeAndModel</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_storage ace_type ace_variable ace_ts">string</span><span class="ace_paren ace_lparen">[</span><span class="ace_paren ace_rparen">]</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">pluck</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">taxi</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_paren ace_lparen">[</span><span class="ace_string">"manufacturer"</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_string">"model"</span><span class="ace_paren ace_rparen">])</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">let</span> <span class="ace_identifier">modelYear</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">pluck</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">taxi</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_paren ace_lparen">[</span><span class="ace_string">"model"</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_string">"year"</span><span class="ace_paren ace_rparen">])</span><span class="ace_punctuation ace_operator">;</span>
</div></div></div></pre><p><code>keyof</code> 返回的是 union ，<code>keyof Car</code> 就是 <code>"manufacturer" | "model" | "year"</code> ，当增加新的属性时， 其会自动增加相应属性。</p><p><code>T[K]</code> 代表泛型上下文中的类型，如：</p><pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">function</span> <span class="ace_identifier">getProperty</span><span class="ace_keyword ace_operator">&lt;</span><span class="ace_identifier">T</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_identifier">K</span> <span class="ace_keyword">extends</span> <span class="ace_identifier">keyof</span> <span class="ace_identifier">T</span><span class="ace_keyword ace_operator">&gt;</span><span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter ace_function ace_ts">o</span>: <span class="ace_variable ace_parameter ace_function ace_ts">T</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_variable ace_parameter ace_function ace_ts">propertyName</span>: <span class="ace_variable ace_parameter ace_function ace_ts">K</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">T</span><span class="ace_paren ace_lparen">[</span><span class="ace_identifier">K</span><span class="ace_paren ace_rparen">]</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_comment">// o[propertyName] <span class="ace_cjk" style="width:NaNpx">的</span><span class="ace_cjk" style="width:NaNpx">类</span><span class="ace_cjk" style="width:NaNpx">型</span><span class="ace_cjk" style="width:NaNpx">便</span><span class="ace_cjk" style="width:NaNpx">是</span> T[K]</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_keyword">return</span> <span class="ace_identifier">o</span><span class="ace_paren ace_lparen">[</span><span class="ace_identifier">propertyName</span><span class="ace_paren ace_rparen">]</span><span class="ace_punctuation ace_operator">;</span> 
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div></div></div></pre><p>索引签名的参数类型只能是 string 或 number ，string 实际上是 <code>string | number</code></p><pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword ace_operator ace_ts">interface</span> <span class="ace_identifier">Dictionary</span><span class="ace_keyword ace_operator">&lt;</span><span class="ace_identifier">T</span><span class="ace_keyword ace_operator">&gt;</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_paren ace_lparen">[</span><span class="ace_variable ace_parameter ace_function ace_ts">key</span>: <span class="ace_variable ace_parameter ace_function ace_ts">string</span><span class="ace_paren ace_rparen">]</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">T</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">let</span> <span class="ace_identifier">keys</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">keyof</span> <span class="ace_identifier">Dictionary</span><span class="ace_keyword ace_operator">&lt;</span><span class="ace_storage ace_type ace_variable ace_ts">number</span><span class="ace_keyword ace_operator">&gt;</span><span class="ace_punctuation ace_operator">;</span>   <span class="ace_comment">// string | number</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">let</span> <span class="ace_identifier">value</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">Dictionary</span><span class="ace_keyword ace_operator">&lt;</span><span class="ace_storage ace_type ace_variable ace_ts">number</span><span class="ace_keyword ace_operator">&gt;</span><span class="ace_paren ace_lparen">[</span><span class="ace_string">"foo"</span><span class="ace_paren ace_rparen">]</span><span class="ace_punctuation ace_operator">;</span> <span class="ace_comment">// number</span>
</div></div></div></pre><h2>1.6 映射类型</h2><p>通过旧类型生成新类型：</p><pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword ace_operator ace_ts">interface</span> <span class="ace_identifier">Person</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_variable ace_parameter ace_function ace_ts">name</span>: <span class="ace_variable ace_parameter ace_function ace_ts">string</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_variable ace_parameter ace_function ace_ts">age</span>: <span class="ace_variable ace_parameter ace_function ace_ts">number</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">type</span> <span class="ace_identifier">Partial</span><span class="ace_keyword ace_operator">&lt;</span><span class="ace_identifier">T</span><span class="ace_keyword ace_operator">&gt;</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_paren ace_lparen">[</span><span class="ace_identifier">P</span> <span class="ace_keyword">in</span> <span class="ace_identifier">keyof</span> <span class="ace_identifier">T</span><span class="ace_paren ace_rparen">]</span><span class="ace_keyword ace_operator">?:</span> <span class="ace_identifier">T</span><span class="ace_paren ace_lparen">[</span><span class="ace_identifier">P</span><span class="ace_paren ace_rparen">]</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">type</span> <span class="ace_identifier">Readonly</span><span class="ace_keyword ace_operator">&lt;</span><span class="ace_identifier">T</span><span class="ace_keyword ace_operator">&gt;</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_identifier">readonly</span> <span class="ace_paren ace_lparen">[</span><span class="ace_identifier">P</span> <span class="ace_keyword">in</span> <span class="ace_identifier">keyof</span> <span class="ace_identifier">T</span><span class="ace_paren ace_rparen">]</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">T</span><span class="ace_paren ace_lparen">[</span><span class="ace_identifier">P</span><span class="ace_paren ace_rparen">]</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">type</span> <span class="ace_identifier">PersonPartial</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">Partial</span><span class="ace_keyword ace_operator">&lt;</span><span class="ace_identifier">Person</span><span class="ace_keyword ace_operator">&gt;</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">type</span> <span class="ace_identifier">ReadonlyPerson</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">Readonly</span><span class="ace_keyword ace_operator">&lt;</span><span class="ace_identifier">Person</span><span class="ace_keyword ace_operator">&gt;</span><span class="ace_punctuation ace_operator">;</span>
</div></div></div></pre><p>一个简单的例子：</p><pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">type</span> <span class="ace_identifier">Keys</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_string">"option1"</span> | <span class="ace_string">"option2"</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">type</span> <span class="ace_identifier">Flags</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_paren ace_lparen">{</span> <span class="ace_paren ace_lparen">[</span><span class="ace_identifier">K</span> <span class="ace_keyword">in</span> <span class="ace_identifier">Keys</span><span class="ace_paren ace_rparen">]</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">boolean</span> <span class="ace_paren ace_rparen">}</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">// <span class="ace_cjk" style="width:NaNpx">等</span><span class="ace_cjk" style="width:NaNpx">同</span><span class="ace_cjk" style="width:NaNpx">于</span></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">type</span> <span class="ace_identifier">Flags</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_variable ace_parameter ace_function ace_ts">option1</span>: <span class="ace_variable ace_parameter ace_function ace_ts">boolean</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_variable ace_parameter ace_function ace_ts">option2</span>: <span class="ace_variable ace_parameter ace_function ace_ts">boolean</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span><span class="ace_punctuation ace_operator">;</span>
</div></div></div></pre><p>最有价值的作用还是结合泛型。如上面的 <code>Readonly&lt;T&gt;</code> 和 <code>Partial&lt;T&gt;</code> 。它两已被纳入 TypeScript 标准库，另外还有：</p><pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">type</span> <span class="ace_identifier">Pick</span><span class="ace_keyword ace_operator">&lt;</span><span class="ace_identifier">T</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_identifier">K</span> <span class="ace_keyword">extends</span> <span class="ace_identifier">keyof</span> <span class="ace_identifier">T</span><span class="ace_keyword ace_operator">&gt;</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_paren ace_lparen">[</span><span class="ace_identifier">P</span> <span class="ace_keyword">in</span> <span class="ace_identifier">K</span><span class="ace_paren ace_rparen">]</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">T</span><span class="ace_paren ace_lparen">[</span><span class="ace_identifier">P</span><span class="ace_paren ace_rparen">]</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">type</span> <span class="ace_identifier">Record</span><span class="ace_keyword ace_operator">&lt;</span><span class="ace_identifier">K</span> <span class="ace_keyword">extends</span> <span class="ace_identifier">keyof</span> <span class="ace_identifier">any</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_identifier">T</span><span class="ace_keyword ace_operator">&gt;</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_paren ace_lparen">[</span><span class="ace_identifier">P</span> <span class="ace_keyword">in</span> <span class="ace_identifier">K</span><span class="ace_paren ace_rparen">]</span><span class="ace_punctuation ace_operator">:</span> <span class="ace_identifier">T</span><span class="ace_punctuation ace_operator">;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span><span class="ace_punctuation ace_operator">;</span>
</div></div></div></pre><h2>1.7 条件(Conditional)类型</h2><p>TODO 高级知识，以后再回来看。</p><p>T 如果可被赋值给 U ，则类型为 X ，否则为 Y 。</p><pre><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">T</span> <span class="ace_keyword">extends</span> <span class="ace_identifier">U</span> <span class="ace_punctuation ace_operator">?</span> <span class="ace_variable ace_parameter ace_function ace_ts">X</span> : <span class="ace_variable ace_parameter ace_function ace_ts">Y</span>
</div></div></div></pre><hr><p>@ssbunny 2020-02-03</p><p><img src="resources/9BDF5BC45B39A9BBFBF64D55FD48EC5B.png" alt="微信二维码_zhq_tiny.png" width="217" height="260"></p><table>

























</table></div></div>
      <script>document.body.onkeyup = function(e) {
if (e.keyCode === 39) window.location.href = '[笔记] Micro Frontends In Action.html';
if (e.keyCode === 37) window.location.href = '[笔记] VSCode 源代码组织方式.html';
}</script>
    </body>
    </html>
  